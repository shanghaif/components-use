(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-24ce"],{"2bCJ":function(e,t,a){"use strict";var n=a("6Cjq");a.n(n).a},"3SVy":function(e,t,a){},"3q6/":function(e,t,a){"use strict";a.r(t);var n=a("gDS+"),i=a.n(n),l=a("v0iw"),s=a.n(l),o=a("t3Un");var r={name:"Mainstation",data:function(){return{msg:{bianma:"",time:""},readtime:""}},computed:{},mounted:function(){this.$nextTick(function(){this.nowtime})},methods:{nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=t.getFullYear()+"年",n=(t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"月",i=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+"日  ",l=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",s=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",o=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();this.readtime=a+n+i+l+s+o,this.$emit("handback",this.msg)},getinformation:function(){}}},c=(a("J6tw"),a("sCux"),a("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainstation"},[a("div",[a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{position:"relative"}},[a("span",{staticStyle:{"margin-top":"-20px","margin-left":"10px",position:"fixed",top:"-5",left:"10",background:"white"}},[e._v("终端信息")]),e._v(" "),a("div",{staticClass:"outmain"},[a("label",{attrs:{for:""}},[e._v("终端编码：")]),e._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"200px"},attrs:{type:"text"},model:{value:e.msg.bianma,callback:function(t){e.$set(e.msg,"bianma",t)},expression:"msg.bianma"}})],1)])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{position:"relative"}},[a("span",{staticStyle:{"margin-top":"-20px","margin-left":"10px",position:"fixed",top:"-5",left:"10",background:"white"}},[e._v("系统时间：")]),e._v(" "),a("div",{staticClass:"outmain"},[a("el-input",{staticStyle:{display:"inline-block",width:"300px"},attrs:{type:"text"},model:{value:e.readtime,callback:function(t){e.readtime=t},expression:"readtime"}})],1)])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{position:"relative"}},[a("span",{staticStyle:{"margin-top":"-20px","margin-left":"10px",position:"fixed",top:"-5",left:"10",background:"white"}},[e._v("等待应答反馈时间/秒")]),e._v(" "),a("div",{staticClass:"outmain"},[a("el-input",{staticStyle:{display:"inline-block",width:"200px"},attrs:{type:"number"},model:{value:e.msg.time,callback:function(t){e.$set(e.msg,"time",t)},expression:"msg.time"}})],1)])])],1)],1)])},[],!1,null,"77a917a9",null);d.options.__file="index.vue";d.exports;var u=a("xiB2"),m={data:function(){this.$createElement;return{operatetype:[],isSelecttime:!0,isCollapse:!0,data1:[],value:[],renderFunc:function(e,t){return e("span",[t.label])},currentPage:1,total:20,pageSize:10,activeName:"second",formInline:{protocol:"30",user:"",vcaddr:"",datatype:"",operation:"",start:"1",end:"1",jiange:"",starttime:"",endtime:"",route:"tcp"},operation:"",datatype:[],dialogTableVisible:!1,radio:3,data:[],defaultProps:{children:"children",label:"name"},tableData1:[],searchvalue:"",departmentid:"",userForm:{usertype:"",searchtype:"",userhh:"",username:"",zdjh:"",ljdz:""},selectdata:[],session:"",gridData1:[]}},computed:{treeData:function(){var e=JSON.parse(i()(this.data));return e.filter(function(t){var a=e.filter(function(e){return t.objectId==e.ParentId});return a.length>0&&(t.children=a),0==t.ParentId})}},updated:function(){this.gridData1=u.a.originrecivedata},mounted:function(){this.getMainstation(),this.getmess(),this.getOperate()},methods:{getOperate:function(){var e=this,t=s.a.Object.extend("MainStationIndex"),a=new s.a.Query(t);a.startsWith("name","C."),a.ascending("name"),a.find().then(function(t){e.operatetype=t})},handleClick:function(){},handleClose:function(){this.dialogTableVisible=!1},firstchange:function(e){var t=this;this.formInline.datatype="",this.datatype=[];var a=s.a.Object.extend("MainStationIndex"),n=new s.a.Query(a);n.equalTo("objectId",e),n.find().then(function(e){e.map(function(e){e.attributes.leafs.map(function(a){var n={label:a,modelindex:e.attributes.sendtype,key:a};t.datatype.push(n)}),console.log(t.datatype)})})},getValue:function(){var e=this;u.a.originrecivedata=[];var t="F"+Math.ceil(1e5*Math.random()),a={topic:"vmsc/send/"+t,qos:0};u.a.subscribe(a,function(e){e.result&&(console.log(a),console.log("订阅成功"))}),function(e,t,a,n,i,l,s,r,c,d,u){return Object(o.a)({url:"/readdata/"+e,method:"POST",params:{from:"web",session:t,operation:a,datatype:n,pn_start:i,pn_end:l,starttime:s,endtime:r,route:c,protocol:d},data:{dis:u}})}(this.formInline.vcaddr,t,this.formInline.operation,this.operation,this.formInline.start,this.formInline.end,Math.ceil(this.formInline.starttime/1e3),Math.ceil(this.formInline.endtime/1e3),this.formInline.route,this.formInline.protocol,this.selectdata).then(function(t){e.dialogTableVisible=!0}).catch(function(t){e.$message({type:"error",message:"下发失败"})})},handleChange:function(e){this.selectdata=e},handleNodeClick:function(e){this.formInline.vcaddr=e.webName},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},getMainstation:function(){var e=this;this.data=[],this.session=s.a.User.current().attributes.sessionToken;var t=s.a.Object.extend("Department");new s.a.Query(t).find().then(function(t){t.map(function(t){var a={};t.createtime=new Date(t.attributes.createdAt).toLocaleDateString(),a.name=t.attributes.name,a.ParentId=t.attributes.ParentId,a.objectId=t.id,a.level=t.attributes.level,a.createtime=t.createtime,a.webName=t.attributes.webName,e.data.push(a)})},function(t){"209"==t.code&&(e.$message({type:"warning",message:"登陆权限过期，请重新登录"}),e.$router.push({path:"/login"}))})},getmess:function(){u.a.cInfo.host=location.hostname,u.a.newClient(),u.a.connect()},dataselect:function(e){var t=this;this.value=[],this.data1=[],this.datatype.map(function(a){e==a.label&&(t.operation=a.modelindex)});var a=s.a.Object.extend("DataItem"),n=new s.a.Query(a);n.equalTo("itemType",this.formInline.operation),n.equalTo("leafname",e),n.limit(1e3),n.ascending("itemCode"),n.find().then(function(e){e.map(function(e){var a={label:e.attributes.itemName,key:e.attributes.itemCode};t.data1.push(a),u.b.push(a)})}),"c.3"==this.operation||"c.4"==this.operation?(this.isSelecttime=!1,this.formInline.starttime=new Date((new Date).setHours(0,0,0,0)-864e5),this.formInline.endtime=new Date):"c.2"==this.operation&&(this.isSelecttime=!0,this.formInline.starttime="",this.formInline.endtime="")}}},p=(a("Gw6L"),a("2bCJ"),a("VF55"),Object(c.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainstations"},[a("div",{staticClass:"firstcard",staticStyle:{width:"322px"}},[a("el-tabs",{attrs:{type:"border-card","tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"收藏",name:"first"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"主网",name:"second"}},[a("div",{staticClass:"zwheader",staticStyle:{height:"100px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:e.searchvalue,callback:function(t){e.searchvalue=t},expression:"searchvalue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("刷新")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("高级查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("重置")])],1)],1),e._v(" "),a("el-tree",{staticStyle:{"margin-top":"20px"},attrs:{data:e.treeData,props:e.defaultProps,"expand-on-click-node":!1,"highlight-current":!0,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"配网",name:"third"}},[a("el-form",{ref:"form",staticStyle:{"border-bottom":"1px solid #cccccc"},attrs:{model:e.userForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户类型："}},[a("el-select",{staticStyle:{width:"176px"},attrs:{placeholder:"请选择用户类型"},model:{value:e.userForm.usertype,callback:function(t){e.$set(e.userForm,"usertype",t)},expression:"userForm.usertype"}},[a("el-option",{attrs:{label:"公变",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"专变",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"查询类型："}},[a("el-select",{staticStyle:{width:"176px"},attrs:{placeholder:"请选择查询类型"},model:{value:e.userForm.searchtype,callback:function(t){e.$set(e.userForm,"searchtype",t)},expression:"userForm.searchtype"}},[a("el-option",{attrs:{label:"用户",value:"shanghai"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"户号："}},[a("el-input",{staticStyle:{width:"176px"},attrs:{type:"text"},model:{value:e.userForm.userhh,callback:function(t){e.$set(e.userForm,"userhh",t)},expression:"userForm.userhh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"户名："}},[a("el-input",{staticStyle:{width:"176px"},attrs:{type:"text"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终端局号："}},[a("el-input",{staticStyle:{width:"176px"},attrs:{type:"text"},model:{value:e.userForm.zdjh,callback:function(t){e.$set(e.userForm,"zdjh",t)},expression:"userForm.zdjh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"逻辑地址："}},[a("el-input",{staticStyle:{width:"176px"},attrs:{type:"number"},model:{value:e.userForm.ljdz,callback:function(t){e.$set(e.userForm,"ljdz",t)},expression:"userForm.ljdz"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"large",name:"third"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("高级")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"行业",name:"fourth"}},[e._v("定时任务补偿")]),e._v(" "),a("el-tab-pane",{attrs:{label:"群组",name:"five"}},[e._v("定时任务补偿")]),e._v(" "),a("el-tab-pane",{attrs:{label:"省遥测",name:"six"}},[e._v("定时任务补偿")])],1)],1),e._v(" "),"second"==e.activeName?a("div",{staticClass:"secondcard",staticStyle:{"min-height":"875px","border-left":"2px solid #156FAE",background:"#f6fbff"}},[a("div",{staticStyle:{width:"100%",height:"auto",padding:"20px","box-sizing":"border-box"}},[a("div",{staticClass:"blockcontent"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"操作类型:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"操作类型"},on:{change:e.firstchange},model:{value:e.formInline.operation,callback:function(t){e.$set(e.formInline,"operation",t)},expression:"formInline.operation"}},e._l(e.operatetype,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.webtype,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"终端逻辑地址:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"终端逻辑地址"},model:{value:e.formInline.vcaddr,callback:function(t){e.$set(e.formInline,"vcaddr",t)},expression:"formInline.vcaddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规约名称:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"规约类型"},model:{value:e.formInline.protocol,callback:function(t){e.$set(e.formInline,"protocol",t)},expression:"formInline.protocol"}},[a("el-option",{attrs:{label:"南网上行通信规约",value:"30"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据类型:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"数据类型"},on:{change:e.dataselect},model:{value:e.formInline.datatype,callback:function(t){e.$set(e.formInline,"datatype",t)},expression:"formInline.datatype"}},e._l(e.datatype,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.key}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"通道类型:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"数据类型"},model:{value:e.formInline.route,callback:function(t){e.$set(e.formInline,"route",t)},expression:"formInline.route"}},[a("el-option",{attrs:{label:"无线",value:"tcp"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开始测量点号:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"开始测量点号",type:"number",min:0,max:2048},model:{value:e.formInline.start,callback:function(t){e.$set(e.formInline,"start",t)},expression:"formInline.start"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束测量点号:"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"结束测量点号",type:"number",min:0,max:2048},model:{value:e.formInline.end,callback:function(t){e.$set(e.formInline,"end",t)},expression:"formInline.end"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"datetime",placeholder:"选择开始时间","value-format":"timestamp",disabled:e.isSelecttime},model:{value:e.formInline.starttime,callback:function(t){e.$set(e.formInline,"starttime",t)},expression:"formInline.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间:"}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"datetime",placeholder:"选择结束时间","value-format":"timestamp",disabled:e.isSelecttime},model:{value:e.formInline.endtime,callback:function(t){e.$set(e.formInline,"endtime",t)},expression:"formInline.endtime"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"blockfooter"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getValue}},[e._v("召测")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{height:"8px",width:"100%",background:"#ffffff"}}),e._v(" "),a("div",{staticClass:"blockall",staticStyle:{"text-align":"center",height:"auto"}},[a("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block","margin-top":"20px"},attrs:{"render-content":e.renderFunc,titles:["数据标识DI","选定查询数据项"],"button-texts":["删除","添加"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.data1},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"召测数据",visible:e.dialogTableVisible,"close-on-click-modal":!1,"before-close":e.handleClose,width:"82%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticStyle:{color:"green"}},[e._v("召测中...")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.gridData1.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),height:"400"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"vcaddr",label:"终端逻辑地址",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"pn",label:"测量点号",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"meteraddr",label:"电表名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"diname",label:"数据项标识",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"value",label:"数据",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"time",label:"冻结日期",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{property:"ts",label:"时间",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v("完成")]):0==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v("召测中")]):a("span",{staticStyle:{color:"red"}},[e._v("超时")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-sizes":[1,5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.gridData1.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},[],!1,null,"0367aedd",null));p.options.__file="jia.vue";t.default=p.exports},"6Cjq":function(e,t,a){},"8Utz":function(e,t,a){},Gw6L:function(e,t,a){"use strict";var n=a("nkv8");a.n(n).a},J6tw:function(e,t,a){"use strict";var n=a("3SVy");a.n(n).a},VF55:function(e,t,a){"use strict";var n=a("n3He");a.n(n).a},n3He:function(e,t,a){},nkv8:function(e,t,a){},sCux:function(e,t,a){"use strict";var n=a("8Utz");a.n(n).a},xiB2:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return s});var n=a("gDS+"),i=a.n(n);function l(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(t)){var i=a[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:o(i))}return t}var s=[];function o(e){return("00"+e).substr(e.length)}var r={modName:"websocket",client:null,connState:!1,cInfo:{host:location.hostname,port:8083,clientId:"C_"+(new Date).getTime(),userName:"test",password:"test123",keepAlive:null,cleanSession:!0},sendInfo:"{}",tablelist:[],originrecivedata:[],send:function(){var e=JSON.parse(this.sendInfo);this.sendMessage(e)},log:function(e){try{e=JSON.parse(e)}catch(e){}_this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"onConnectionLost: "+i()(e)}),console.log(111)},newClient:function(){this.client=new Paho.MQTT.Client(this.cInfo.host,Number(this.cInfo.port),this.cInfo.clientId)},sslPort:function(){var e=this.cInfo.useSSL;this.cInfo.port=e?8084:8083},recive:function(e){var t=this,a=JSON.parse(e);t.originrecivedata.length=0,a.data.map(function(e){s.map(function(n){e.di==n.key&&t.originrecivedata.unshift({di:e.di,pn:e.pn,value:e.value,vcaddr:a.vcaddr,ts:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" "+(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds())}(e.ts),meteraddr:e.meteraddr,diname:n.label,time:e.time,status:e.status})})}),console.log(t.originrecivedata)},connect:function(){var e=this;if(e.newClient(),e.client){e.client.onConnectionLost=function(t){0!==t.errorCode&&(e.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"onConnectionLost: "+i()(t.errorMessage)}),console.log("onConnectionLost: "+t.errorMessage)),e.disconnect()},e.client.onMessageArrived=function(t){try{t.msgString=t.payloadString}catch(e){t.msgString="Binary message("+t.payloadBytes.length+")"}e.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(t.payloadString)}),e.recive(t.payloadString)};var t={onFailure:function(t){e.connState=!1,e.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"连接失败"}),console.log("连接失败 "+t.errorMessage)},onSuccess:function(){e.connState=!0,e.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"连接成功"}),console.log("连接成功！")}},a=e.cInfo.userName,n=e.cInfo.password,s=e.cInfo.keepAlive,o=e.cInfo.cleanSession;a&&(t.userName=a),n&&(t.password=n),s&&(t.keepAliveInterval=Number(s)),t.cleanSession=o,e.client.connect(t)}},disconnect:function(){this.client&&this.client.isConnected()&&(this.client.disconnect(),this.client=null),this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"已断开连接"}),console.log("已经断开连接！"),this.connState=!1},subscribe:function(e,t){var a=this;return a.client&&a.client.isConnected()?e.topic?void a.client.subscribe(e.topic,{qos:Number(e.qos),onSuccess:function(n){e.msg=n,a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(e)}),console.log(e.msg),e.result=!0,t&&t(e)},onFailure:function(n){128===n.errorCode[0]&&console.log("The topic cannot SUBSCRIBE for ACL Deny"),e.msg=n,a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(n)}),console.log(n),e.result=!1,t&&t(e)}}):(a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"topic为空！"}),void console.log("topic为空！")):(a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"当前尚未连接"}),console.log("当前尚未连接"),void alert("当前尚未连接","请刷新页面"))},unsubscribe:function(e,t){var a=this;return a.client&&a.client.isConnected()?e.topic?void a.client.unsubscribe(e.topic,{onSuccess:function(n){e.msg=n,a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(e)}),console.log(e),e.result=!0,t&&t(e)},onFailure:function(n){e.msg=n,a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(n)}),console.log(n),e.result=!0,t&&t(e)}}):(a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"topic为空！"}),void console.log("topic为空！")):(a.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"当前尚未连接"}),void console.log("当前尚未连接"))},sendMessage:function(e){var t=e.text;if(!this.client||!this.client.isConnected())return this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"当前尚未连接"}),void console.log("当前尚未连接");if(!e.topic)return this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"topic为空！"}),void console.log("topic为空！");if(!t)return this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:"消息内容为空！"}),void console.log("消息内容为空！");var a=new Paho.MQTT.Message(t);a.destinationName=e.topic,a.qos=Number(e.qos),a.retained=e.retained,this.client.send(a),this.tablelist.push({date:l(new Date,"yyyy-MM-dd hh:mm"),content:i()(e)}),console.log(e)}}}}]);