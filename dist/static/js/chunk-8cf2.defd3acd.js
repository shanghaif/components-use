(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8cf2"],{"+Oxy":function(e,t,a){"use strict";a.r(t);var n,r,i,o=a("gDS+"),s=a.n(o),l=a("v0iw"),c=a.n(l),u=a("Yh9x"),d=a("Mld3"),p=(a("lTfz"),a("pG51"),a("URgk")),m=a("J66h").Base64,g="",f=!1,b={data:function(){var e=this;return{topicdialogVisible:!1,topicform:{topic:"",type:"",desc:"",isupdated:-1},topicrule:{topic:[{required:!0,message:"请输入Topic类",trigger:"blur"}],type:[{required:!0,message:"请选择Topic权限",trigger:"change"}]},topicstart:1,topiclength:10,topictotal:0,channelData:[],allchannelData:[],innerVisible:!1,allChannelstart:0,allChannellength:10,allChanneltotal:0,category:[],current:0,schemadialogVisible:!1,PropData:[],originwmx:!1,wmxdialogVisible:!1,allunit:[],sizeForm:{resource:1,identifier:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"",unit:"",specs:[{attribute:"",attributevalue:""}]},sizerule:{step:[{required:!0,trigger:"blur",validator:function(t,a,n){a>=e.sizeForm.endnumber-e.sizeForm.startnumber?n(new Error("步长必须小于最大值和最小值的差值")):n()}}],startnumber:[{validator:function(t,a,n){/^[1-9]\d*$/.test(a)?a>=e.sizeForm.endnumber?n(new Error("最小值小于最大值")):n():n(new Error("必须为数字"))},required:!0,trigger:"blur"}],endnumber:[{validator:function(t,a,n){/^[1-9]\d*$/.test(a)?a<=e.sizeForm.startnumber?n(new Error("最大值必须大于最小值")):n():n(new Error("必须为数字"))},required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},tableData:[],activeName:"first",form:{Productname:"",ProductKey:"",ProductAll:0},ProductSecret:"",dynamicReg:!1,productId:"",productdetail:{},topicData:[],topic:[{topic:"thing/${ProductId}/${DevAddr}/post",type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/${ProductId}/${DevAddr}",type:"sub",desc:"消息下发",isdef:!0}],isshow:!1,addRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:function(e,t,a){/[0-9a-zA-Z]/.test(t)?a():a(new Error("协议名称由数字和字母组合"))},trigger:"blur"}]},dialogTableVisible:!1,gridData:[],formInline:{name:"",version:"",desc:"",resource:!1},objectId:"",option:[],CategoryKey:"",productstart:0,productlength:10,producttotal:0,wmxstart:1,wmxlength:10,wmxtotal:20,wmxData:[],warningeditror:[],channellength:10,channelstart:0,channeltotal:0}},computed:{treeData:function(){var e=JSON.parse(s()(this.option));return e.filter(function(t){var a=e.filter(function(e){return t.id==e.parentid});return a.length>0&&(t.children=a),0==t.parentid})}},mounted:function(){(i=ace.edit("editor2")).session.setMode("ace/mode/json"),i.setTheme("ace/theme/monokai"),i.setReadOnly(!0),i.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit()},methods:{getRowClass:function(e,t){if("struct"!=e.row.dataType.type)return"row-expand-cover"},handleClick:function(e){"fiveth"==e.name?this.getProductChannel():"second"==e.name&&this.getTopic()},getAllunit:function(){var e=this;this.allunit=[];var t=c.a.Object.extend("Datas"),a=new c.a.Query(t);a.equalTo("type","unit"),a.limit(1e3),a.find().then(function(t){e.allunit=t.concat([]),e.allunit.unshift({attributes:{data:{Name:"无",Symbol:""}}})},function(t){e.$message.error(t.message)})},getTopic:function(){var e=this,t=c.a.Object.extend("Product");new c.a.Query(t).get(this.productId).then(function(t){t&&(e.topicData=t.attributes.topics.concat(e.topic))},function(t){e.$message({type:"error",message:t.message})})},getProductChannel:function(){var e=this,t=c.a.Object.extend("Channel"),a=new c.a.Query(t),n=new(c.a.Object.extend("Product"));n.id=this.productId,a.equalTo("product",n),a.skip(this.channelstart),a.limit(this.channellength),a.ascending("-updatedAt"),a.count().then(function(t){e.channeltotal=t,a.find().then(function(t){e.channelData=t,f=0==t.length})})},addProductChannel:function(e){var t=this,a=new(c.a.Object.extend("Channel"));a.id=e;var n=a.relation("product"),r=new(c.a.Object.extend("Product"));r.set("objectId",this.productId),n.add(r),a.save().then(function(e){e&&(t.$message({type:"success",message:"添加成功"}),t.showAllChannel(),t.getProductChannel())},function(e){t.$message({type:"error",message:e.message})})},deleteRelation:function(e){var t=this,a=new(c.a.Object.extend("Channel"));a.id=e.id;var n=a.relation("product"),r=new(c.a.Object.extend("Product"));r.set("objectId",this.productId),n.remove(r),a.save().then(function(e){e&&(t.$message({type:"success",message:"删除成功"}),t.getProductChannel())},function(e){t.$message({type:"error",message:e.message})})},channelSizeChange:function(e){this.channellength=e,this.getProductChannel()},channelCurrentChange:function(e){this.channelstart=(e-1)*this.channellength,this.getProductChannel()},showAllChannel:function(){var e=this;this.innerVisible=!0;var t=c.a.Object.extend("Channel"),a=new c.a.Query(t),n=new(c.a.Object.extend("Product"));n.id=this.productId,a.skip(this.allChannelstart),a.limit(this.allChannellength),a.ascending("-updatedAt"),f||a.notEqualTo("product",n),a.count().then(function(t){e.allChanneltotal=t,a.find().then(function(t){e.allchannelData=t})})},allChannelSizeChange:function(e){this.allChannellength=e,this.showAllChannel()},allChannelCurrentChange:function(e){this.allChannelstart=(e-1)*this.allChannellength,this.showAllChannel()},removeDomain:function(e){var t=this.sizeForm.specs.indexOf(e);-1!==t&&this.sizeForm.specs.splice(t,1)},addDomain:function(){this.sizeForm.specs.push({value:"",name:""})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log(a),console.log("error submit!!"),!1;var n={};console.log(t.sizeForm);var r=c.a.Object.extend("Product");new c.a.Query(r).get(t.productId).then(function(a){if("FLOAT"==t.sizeForm.type||"DOUBLE"==t.sizeForm.type||"INT"==t.sizeForm.type)n={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{max:t.sizeForm.endnumber,min:t.sizeForm.startnumber,step:t.sizeForm.step,unit:""==t.sizeForm.unit?"":t.sizeForm.unit}},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier};else if("BOOL"==t.sizeForm.type)n={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{0:t.sizeForm.false,1:t.sizeForm.true}},required:!1,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier};else if(t.sizeForm.type="ENUM"){console.log(t.sizeForm.specs);var r={};t.sizeForm.specs.map(function(e){var t=e.attribute;r[t]=e.attributevalue}),console.log(r),n={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:r},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}}t.productdetail.thing.properties.unshift(n),a.set("thing",t.productdetail.thing),a.save().then(function(a){a&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail(),t.$refs[e].resetFields(),t.wmxdialogVisible=!1)})})})},preserve:function(){var e=this,t=c.a.Object.extend("Product");new c.a.Query(t).get(this.productId).then(function(t){t.set("thing",JSON.parse(r.getValue())),t.save().then(function(t){t&&e.$message({type:"success",message:"保存成功"})},function(t){e.$message({type:"error",message:t.message})})})},Industry:function(){var e=this;this.option=[],Object(d.c)({limit:1e3,where:{type:"category"}}).then(function(t){t&&(t.results.map(function(t){var a={};a.value=t.data.CategoryKey,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)}),e.getProDetail())}).catch(function(t){e.$message({type:"error",message:t.error})})},utc2beijing:function(e){return new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")},getPropData:function(){var e=this;this.CategoryKey=this.$route.query.CategoryKey;var t=c.a.Object.extend("Datas"),a=new c.a.Query(t);a.limit(this.productlength),a.skip(this.productstart),0!=this.category.length&&a.equalTo("data.CategoryType",this.category[this.category.length-1]),a.equalTo("type","abilityInfo"),a.count().then(function(t){e.producttotal=t,a.find().then(function(t){e.PropData=t},function(e){console.log(e)})})},productSizeChange:function(e){this.productlength=e,this.getPropData()},productCurrentChange:function(e){this.productstart=(e-1)*this.productlength,this.getPropData()},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object(p.setTimeout)(function(){(r=ace.edit("editor1")).session.setMode("ace/mode/json"),r.setTheme("ace/theme/eclipse"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),r.setValue(s()(e.productdetail.thing,null,4))},1)},getProDetail:function(){var e=this;(n=ace.edit("editor")).session.setMode("ace/mode/erlang"),n.setTheme("ace/theme/monokai"),n.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.productId=this.$route.query.id;var t=c.a.Object.extend("Product");new c.a.Query(t).get(this.productId).then(function(t){if(t){for(var a in t.attributes)e.productdetail[a]=t.attributes[a];e.option.map(function(t){e.productdetail.category==t.value&&(e.productdetail.category=t.label)}),e.productdetail.createdAt=e.utc2beijing(t.createdAt),e.productdetail.id=t.id,e.dynamicReg=t.attributes.dynamicReg,e.productdetail.isshow=0,e.form.Productname=t.attributes.name,e.ProductSecret=t.attributes.productSecret,e.form.Productkey=e.productId,t.attributes.decoder?(g=t.attributes.decoder.code,e.formInline.name=t.attributes.decoder.name,e.formInline.version=t.attributes.decoder.version,e.formInline.desc=t.attributes.decoder.desc):g="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4=",e.productdetail.thing?e.wmxData=e.productdetail.thing.properties.concat([]):(e.productdetail.thing={properties:[]},e.wmxData=e.productdetail.thing.properties.concat([])),n.setValue(m.decode(g));var r=c.a.Object.extend("Devices"),i=new c.a.Query(r);i.equalTo("product",e.productId),i.skip(0),i.count().then(function(t){e.form.ProductAll=t})}},function(t){e.$message({type:"error",message:t.message})})},handelUpdate:function(e,t){var a,n=this;a=1!=e,this.dynamicReg=a;var r=c.a.Object.extend("Product");new c.a.Query(r).get(this.productId).then(function(e){e.set("dynamicReg",!a),e.save().then(function(e){e&&(n.$message({type:"success",message:"修改成功"}),n.dynamicReg=!a)},function(e){n.$message({type:"error",message:e.message})})})},wmxhandleClose:function(){this.wmxdialogVisible=!1},protol:function(){var e=this,t="";Object(u.a)(m.encode(n.getValue())).then(function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map(function(e){t+=e+"\r\n"}),i.setValue(t))}).catch(function(a){e.warningeditror=a.error,e.warningeditror.map(function(e){t+=e+"\r\n"}),i.setValue(t)})},subAce:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={name:t.formInline.name,version:t.formInline.version,code:m.encode(n.getValue()),desc:t.formInline.desc},r=c.a.Object.extend("Product");new c.a.Query(r).get(t.productId).then(function(e){e.set("decoder",a),e.save().then(function(e){t.$message({type:"success",message:"保存成功"})})})}else t.$message({type:"warning",message:"输入格式有误"})})},chaxun:function(){var e=this,t=c.a.Object.extend("Datas"),a=new c.a.Query(t);a.equalTo("type","decoder"),a.ascending("-createdAt"),a.find().then(function(t){t&&(e.dialogTableVisible=!0,e.gridData=t)})},editordata:function(e){this.formInline.name=e.attributes.data.name,this.formInline.version=e.attributes.data.version,this.formInline.desc=e.attributes.data.desc,this.formInline.resource=e.attributes.data.enable,n.setValue(m.decode(e.attributes.data.code)),this.dialogTableVisible=!1},goToDevices:function(){this.$router.push({path:"/roles/thing",query:{productid:this.productId}})},addcategory:function(){this.originwmx=!0,this.getPropData()},handleChange:function(e,t,a){console.log(e,t,a)},TypeInstall:function(e,t){t.map(function(t,a){if("enum"==t.DataType||"bool"==t.DataType)(n={dataType:{specs:{}}}).name=t.Name,n.dataType.type=t.DataType,n.required=t.Required,n.identifier=t.Identifier,n.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map(function(e){for(var t in e){var a=e.value,r=e.name;n.dataType.specs[a]=r}}),e.push(n);else if("double"==t.DataType||"int"==t.DataType||"float"==t.DataType){var n={dataType:{specs:{}}};for(var r in n.name=t.Name,n.dataType.type=t.DataType,n.required=t.Required,n.identifier=t.Identifier,n.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecs))n.dataType.specs.min=JSON.parse(t.DataSpecs).min,n.dataType.specs.max=JSON.parse(t.DataSpecs).max,n.dataType.specs.step=JSON.parse(t.DataSpecs).step,n.dataType.specs.unit=JSON.parse(t.DataSpecs).unit;e.push(n)}});var a={};e=e.reduce(function(e,t){return!a[t.identifier]&&(a[t.identifier]=e.push(t)),e},[])},addProCategory:function(e){var t=this,a=c.a.Object.extend("Product"),n=new c.a.Query(a),r=c.a.Object.extend("Datas"),i=new c.a.Query(r);i.equalTo("type",e.attributes.data.CategoryType),i.find().then(function(e){e&&(e[0].attributes.data.Ability?(t.TypeInstall(t.productdetail.thing.properties,e[0].attributes.data.Ability),n.get(t.productId).then(function(e){e.set("thing",t.productdetail.thing),e.save().then(function(e){t.$message({type:"success",message:"添加成功"}),t.getProDetail()})})):console.log("此选项没有属性功能"))})},deletewmx:function(e){var t=this;this.productdetail.thing.properties.splice((this.wmxstart-1)*this.wmxlength+e,1);var a=c.a.Object.extend("Product");new c.a.Query(a).get(this.productId).then(function(e){e.set("thing",t.productdetail.thing),e.save().then(function(e){e&&(t.$message({type:"success",message:"删除成功"}),t.wmxData=t.productdetail.thing.properties.concat([]))},function(e){t.$message({type:"error",message:e.message})})})},wmxSizeChange:function(e){this.wmxstart=1,this.wmxlength=e,console.log(this.wmxData.slice((this.wmxstart-1)*this.wmxlength,this.wmxstart*this.wmxlength))},wmxCurrentChange:function(e){this.wmxstart=e},subTopic:function(e,t){var a=this;this.$refs[e].validate(function(n){if(!n)return console.log("error submit!!"),!1;var r="thing/"+a.productId+"/${DevAddr}/"+a.topicform.topic,i=c.a.Object.extend("Product");new c.a.Query(i).get(a.productId).then(function(n){var i={topic:r,type:a.topicform.type,desc:a.topicform.desc},o=[];if(o.push(i),-1==t)o=o.concat(n.attributes.topics),n.set("topics",o);else{var s=n.attributes.topics.concat([]);s[t]=i,n.set("topics",s)}n.save().then(function(t){t&&(a.$message({type:"success",message:"成功"}),a.topicdialogVisible=!1,a.$refs[e].resetFields(),a.topicform.isupdated=-1,a.topicform.topic="",a.topicform.desc="",a.handleClick({name:"second"}))},function(e){a.$message({type:"error",message:e.message})})})})},topicSizeChange:function(e){this.topicstart=1,this.topiclength=e},topicCurrentChange:function(e){this.topicstart=e},updatetopic:function(e,t){this.topicform.topic=e.topic.substr(e.topic.lastIndexOf("/")+1),this.topicform.type=e.type,this.topicform.desc=e.desc,this.topicdialogVisible=!0,this.topicform.isupdated=t},deletetopic:function(e,t){var a=this,n=c.a.Object.extend("Product");new c.a.Query(n).get(this.productId).then(function(n){var r=n.attributes.topics.concat([]);r.splice(t,1),n.set("topics",r),n.save().then(function(t){t&&(a.$message({type:"success",message:"删除成功"}),e._self.$refs["popover-"+e.$index].doClose(),a.handleClick({name:"second"}))},function(e){a.$message({type:"error",message:e.message})})})}}},h=(a("D2Zy"),a("ErXj"),a("KHd+")),v=Object(h.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editproduct"},[a("div",{staticClass:"editheader"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/product"}}},[e._v("产品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("产品详情")])],1),e._v(" "),a("div",{staticClass:"product"},[a("ul",[a("li",[a("span",[e._v("ProductId:")]),e._v(" "),a("span",[e._v(e._s(e.productId))])]),e._v(" "),a("li",[a("span",[e._v("ProductSecret:")]),e._v(" "),0==e.isshow?a("span",[e._v("\n            ********************\n            "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!0}}},[e._v("显示")])],1):a("span",[e._v("\n            "+e._s(e.ProductSecret)+"\n            "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!1}}},[e._v("隐藏")])],1)]),e._v(" "),a("li",[a("span",[e._v("设备数:")]),e._v(" "),a("span",[e._v("\n            "+e._s(e.form.ProductAll)+"\n            "),a("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{underline:!1,type:"primary"},on:{click:e.goToDevices}},[e._v("前往设备")])],1)])])])],1),e._v(" "),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"产品信息",name:"first"}},[a("div",{staticStyle:{background:"#ffffff",padding:"10px","box-sizing":"border-box"}},[a("div",[a("table",{staticClass:"mailtable",staticStyle:{width:"100%"},attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("tr",[a("td",{staticClass:"cloumn"},[e._v("产品名称")]),e._v(" "),a("td",[e._v(e._s(e.productdetail.name))]),e._v(" "),a("td",{staticClass:"cloumn"},[e._v("节点类型")]),e._v(" "),1==e.productdetail.nodeType?a("td",[e._v("网关")]):a("td",[e._v("设备")]),e._v(" "),a("td",{staticClass:"cloumn"},[e._v("创建时间")]),e._v(" "),a("td",[e._v(e._s(e.productdetail.createdAt))])]),e._v(" "),a("tr",[a("td",{staticClass:"cloumn"},[e._v("所属分类")]),e._v(" "),a("td",[e._v(e._s(e.productdetail.category))]),e._v(" "),a("td",{staticClass:"cloumn"},[e._v("\n                  动态注册\n                  "),a("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:"您可以根据需要，开启或关闭动态注册，无需存库",placement:"top",effect:"light"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("td",[0==e.dynamicReg?a("span",{staticStyle:{color:"#cccccc"}},[e._v("已关闭")]):a("span",[e._v("已开启")]),e._v(" "),a("el-switch",{attrs:{"active-color":"#5eb058","inactive-color":"#cccccc","active-value":!0,"inactive-value":!1},on:{change:function(t){e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],1),e._v(" "),a("td",{staticClass:"cloumn"},[e._v("连网协议")]),e._v(" "),"CELLULAR"==e.productdetail.netType?a("td",[e._v("蜂窝(2G/3G/4G)")]):"WIFI"==e.productdetail.netType?a("td",[e._v("WiFi")]):"ETHERNET"==e.productdetail.netType?a("td",[e._v("以太网")]):"LORA"==e.productdetail.netType?a("td",[e._v("LoRaWAN")]):a("td",[e._v("其他")])]),e._v(" "),a("tr",[a("td",{staticClass:"cloumn"},[e._v("产品描述")]),e._v(" "),a("td",{attrs:{colspan:"6"}},[e._v(e._s(e.productdetail.desc))])])])])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"Topic列表",name:"second"}},[a("div",{staticStyle:{background:"#ffffff",padding:"10px","box-sizing":"border-box"}},[a("div",{staticClass:"addtopic",staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.topicdialogVisible=!0}}},[e._v("自定义Topic类")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength)}},[a("el-table-column",{attrs:{label:"Topic",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.topic.replace("${ProductId}",e.productId)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作权限",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?a("span",[e._v("发布")]):e._e(),e._v(" "),"sub"==t.row.type?a("span",[e._v("订阅")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",align:"center",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.updatetopic(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-popover",{ref:"popover-"+t.$index,attrs:{placement:"top",width:"300"}},[a("p",[e._v("确定删除这个"+e._s(t.row.topic)+"Topic类吗？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t._self.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.deletetopic(t,t.$index)}}},[e._v("确定")])],1),e._v(" "),t.row.isdef?e._e():a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.topiclength,layout:"total, sizes, prev, pager, next, jumper",total:e.topicData.length},on:{"size-change":e.topicSizeChange,"current-change":e.topicCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"定义topic类",visible:e.topicdialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[a("div",{staticClass:"topiccontent"},[a("div",{staticStyle:{padding:"10px","box-sizing":"border-box",background:"#e6f9fc","font-size":"16px"}},[a("i",{staticClass:"el-icon-warning"}),e._v("\n              Topic格式必须以“/”进行分层，第一个代表产品标识ProductId，第二个${DevAddr}通配devaddr设备连接之后为具体的设备地址。\n            ")]),e._v(" "),a("div",{staticClass:"topicform"},[a("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[a("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[a("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[a("template",{slot:"prepend"},[e._v(e._s("thing/"+e.productId+"/${DevAddr}/"))])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备操作权限：",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择设备操作权限"},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[a("el-option",{attrs:{label:"订阅",value:"sub"}}),e._v(" "),a("el-option",{attrs:{label:"发布",value:"pub"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.topicdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subTopic("topicform",e.topicform.isupdated)}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"功能定义",name:"third"}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkschema}},[e._v("查看物模型")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.wmxdialogVisible=!0}}},[e._v("新增自定义属性")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addcategory}},[e._v("新增标准属性")])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxlength,e.wmxstart*e.wmxlength),border:"","row-key":"index","default-expand-all":!0,"row-class-name":e.getRowClass}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[a("el-table",{staticStyle:{width:"60%","text-align":"center","box-sizing":"border-box"},attrs:{data:t.row.dataType.specs}},[a("el-table-column",{attrs:{label:"标识符",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.identifier))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"功能类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("属性")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"功能名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据定义",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])})],1)]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"identifier",label:"标识符"}}),e._v(" "),a("el-table-column",{attrs:{label:"功能类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("属性")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"功能名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据定义"},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"struct"!=t.row.dataType.type?a("span",[e._v(e._s(t.row.dataType.specs))]):a("span"):a("span",[e._v(e._s("取值范围:"+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deletewmx(t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.wmxlength,layout:"total, sizes, prev, pager, next, jumper",total:e.wmxData.length},on:{"size-change":e.wmxSizeChange,"current-change":e.wmxCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"功能添加",visible:e.originwmx,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.originwmx=t}}},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("label",{attrs:{for:""}},[e._v("所属分类")]),e._v(" "),a("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getPropData}},[e._v("搜 索")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData}},[a("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"标识符",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.Identifier))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"适用类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.CategoryName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.addProCategory(t.row)}}},[e._v("添加")])]}}])})],1)],1),e._v(" "),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.productlength,layout:"total, sizes, prev, pager, next, jumper",total:e.producttotal,small:""},on:{"size-change":e.productSizeChange,"current-change":e.productCurrentChange}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加属性参数",visible:e.wmxdialogVisible,width:"40%",top:"5vh","before-close":e.wmxhandleClose},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("div",{staticClass:"wmxheader"},[a("el-form",{ref:"sizeForm",attrs:{model:e.sizeForm,size:"small",rules:e.sizerule}},[a("el-form-item",{attrs:{label:"功能类型",prop:"resource"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.sizeForm.resource,callback:function(t){e.$set(e.sizeForm,"resource",t)},expression:"sizeForm.resource"}},[a("el-radio",{attrs:{label:1}},[e._v("属性")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("事件")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("复合型")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"功能名称",prop:"name"}},[a("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标识符",prop:"identifier"}},[a("el-input",{model:{value:e.sizeForm.identifier,callback:function(t){e.$set(e.sizeForm,"identifier",t)},expression:"sizeForm.identifier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择数据类型"},model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},[a("el-option",{attrs:{label:"整形",value:"INT"}}),e._v(" "),a("el-option",{attrs:{label:"浮点型",value:"FLOAT"}}),e._v(" "),a("el-option",{attrs:{label:"双精度型",value:"DOUBLE"}}),e._v(" "),a("el-option",{attrs:{label:"布尔型",value:"BOOL"}}),e._v(" "),a("el-option",{attrs:{label:"枚举型",value:"ENUM"}}),e._v(" "),a("el-option",{attrs:{label:"结构体",value:"STRUCT"}}),e._v(" "),a("el-option",{attrs:{label:"字符串",value:"STRING"}}),e._v(" "),a("el-option",{attrs:{label:"时间型",value:"DATE"}})],1)],1),e._v(" "),"INT"==e.sizeForm.type||"FLOAT"==e.sizeForm.type||"DOUBLE"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{required:"",label:"取值范围"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{type:"number",placeholder:"最小值"},model:{value:e.sizeForm.startnumber,callback:function(t){e.$set(e.sizeForm,"startnumber",e._n(t))},expression:"sizeForm.startnumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{type:"number",placeholder:"最大值"},model:{value:e.sizeForm.endnumber,callback:function(t){e.$set(e.sizeForm,"endnumber",e._n(t))},expression:"sizeForm.endnumber"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"步数",prop:"step"}},[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",precision:2,step:.1},model:{value:e.sizeForm.step,callback:function(t){e.$set(e.sizeForm,"step",e._n(t))},expression:"sizeForm.step"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位"}},[a("el-select",{attrs:{placeholder:"单位"},model:{value:e.sizeForm.unit,callback:function(t){e.$set(e.sizeForm,"unit",t)},expression:"sizeForm.unit"}},e._l(e.allunit,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.data.Name+"/"+e.attributes.data.Symbol,value:e.attributes.data.Symbol}})}))],1)],1):e._e(),e._v(" "),"BOOL"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:"属性",required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:"属性值",readonly:""},model:{value:e.sizeForm.truevalue,callback:function(t){e.$set(e.sizeForm,"truevalue",t)},expression:"sizeForm.truevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:"例如：开"},model:{value:e.sizeForm.true,callback:function(t){e.$set(e.sizeForm,"true",t)},expression:"sizeForm.true"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:"属性值",readonly:""},model:{value:e.sizeForm.falsevalue,callback:function(t){e.$set(e.sizeForm,"falsevalue",t)},expression:"sizeForm.falsevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:"例如：关"},model:{value:e.sizeForm.false,callback:function(t){e.$set(e.sizeForm,"false",t)},expression:"sizeForm.false"}})],1)],1)],1)])],1):e._e(),e._v(" "),"ENUM"==e.sizeForm.type?a("div",[e._l(e.sizeForm.specs,function(t,n){return a("el-form-item",{key:n,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"属性"+n,prop:"specs."+n+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:"例编号为'0''"},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"属性值"+n,prop:"specs."+n+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:"对改枚举项的描述"},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-left":"5px","margin-top":"30px"},attrs:{type:"primary",underline:!1,icon:"el-icon-minus"},on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)],1)}),e._v(" "),a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain}},[e._v("添加枚举项")])],2):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"读写类型",prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.sizeForm.isread,callback:function(t){e.$set(e.sizeForm,"isread",t)},expression:"sizeForm.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v("读写")]),e._v(" "),a("el-radio",{attrs:{label:"r"}},[e._v("只读")])],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.wmxdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("sizeForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"协议解析",name:"fourth"}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[a("el-form-item",{attrs:{label:"协议名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本"}},[a("el-input",{attrs:{placeholder:"版本"},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"版本描述"},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.subAce("formInline")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.chaxun}},[e._v("公共协议库")])],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.protol}},[e._v("编译")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"公共协议库",visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{label:"协议名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"版本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.version))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editordata(t.row)}}},[e._v("克隆")])]}}])})],1)],1),e._v(" "),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),e._v(" "),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("div",{staticStyle:{color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd",padding:"5px"}},[a("span",[e._v("控制输出")])]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-bottom":"0","margin-top":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"服务通道",name:"fiveth"}},[a("div",{staticClass:"productchannel",staticStyle:{"text-align":"right",padding:"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAllChannel}},[e._v("添加通道")])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData}},[a("el-table-column",{attrs:{label:"通道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"通道地址"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[a("el-tooltip",{attrs:{content:"${addr}为对应的设备地址",placement:"top"}},[a("span",[e._v("\n                      通道路径\n                      "),a("i",{staticClass:"el-icon-question"})])])],1)]}},{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.attributes.name+"/"+e.productId+"/${addr}"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"服务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"侦听端口/TOPIC"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.config.port?a("span",[e._v(e._s(t.row.attributes.config.port))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteRelation(t.row)}}},[e._v("移除通道")])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.channellength,layout:"total, sizes, prev, pager, next, jumper",total:e.channeltotal},on:{"size-change":e.channelSizeChange,"current-change":e.channelCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加通道",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"addchannel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"}},[a("el-table-column",{attrs:{label:"通道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"服务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"侦听端口/TOPIC"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.config.port?a("span",[e._v(e._s(t.row.attributes.config.port))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"通道状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.attributes.isEnable?a("span",{staticStyle:{color:"green"}},[e._v("已启用")]):a("span",[e._v("已禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.addProductChannel(t.row.id)}}},[e._v("添加")])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.allChannellength,layout:"total, sizes, prev, pager, next, jumper",total:e.allChanneltotal},on:{"size-change":e.allChannelSizeChange,"current-change":e.allChannelCurrentChange}})],1)],1)])],1)])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看物模型",visible:e.schemadialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input"})])]),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v("保 存")])],1)])],1)},[],!1,null,"c881c43e",null);v.options.__file="proddetail.vue";t.default=v.exports},"19n2":function(e,t,a){},D2Zy:function(e,t,a){"use strict";var n=a("UzHl");a.n(n).a},ErXj:function(e,t,a){"use strict";var n=a("19n2");a.n(n).a},J66h:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){"use strict";var _Base64=(global=global||{}).Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},a=0,n=e.length;a<n;a++)t[e.charAt(a)]=a;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],a=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),n=[b64chars.charAt(a>>>18),b64chars.charAt(a>>>12&63),t>=2?"=":b64chars.charAt(a>>>6&63),t>=1?"=":b64chars.charAt(63&a)];return n.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return fromCharCode(55296+(a>>>10))+fromCharCode(56320+(1023&a));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,a=t%4,n=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),r=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return r.length-=[0,0,2,1][a],r.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}global.Meteor&&(Base64=global.Base64);void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));return{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}).call(this,__webpack_require__("yLpj"))},Mld3:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"d",function(){return l});var n=a("t3Un");function r(e){var t=e.order,a=e.limit,r=e.skip,i=e.keys,o=e.include,s=e.where;return Object(n.a)({url:"/classes/Datas",method:"get",params:{order:t,limit:a,skip:r,keys:i,include:o,where:s}})}function i(e){var t=e.order,a=e.limit,r=e.skip,i=e.keys,o=e.include,s=e.where;return Object(n.a)({url:"/classes/App",method:"get",params:{order:t,limit:a,skip:r,keys:i,include:o,where:s}})}function o(e){return Object(n.a)({url:"/classes/App",method:"post",data:{ACL:{"role:admin":{read:!0,write:!0},"role:root":{read:!0,write:!0},"*":{read:!0,write:!0}},copyright:e.copyright,title:e.name,config:{expires:e.expires},secret:e.secret,scale:e.scale,category:e.category,productIdentifier:e.productIdentifier,logo:e.img,desc:e.desc}})}function s(e,t){return Object(n.a)({url:"/classes/App/"+e,method:"put",data:{copyright:t.copyright,title:t.name,config:{expires:t.expires},secret:t.secret,scale:t.scale,category:t.category,productIdentifier:t.productIdentifier,logo:t.img,desc:t.desc}})}function l(e){if("number"==typeof e){e=String(e);var t=/0{8}$/,a=/0{4}$/;return t.test(e)?e.replace(t,"亿"):a.test(e)?e.replace(a,"万"):e}if("string"==typeof e){var n=/万+$/,r=/亿+$/;return r.test(e)?e.replace(r,"00000000"):n.test(e)?e.replace(n,"0000"):e}}},URgk:function(e,t,a){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a("yLpj"))},UzHl:function(e,t,a){},YBdB:function(e,t,a){(function(e,t){!function(e,a){"use strict";if(!e.setImmediate){var n,r=1,i={},o=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){u(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?function(){var t="setImmediate$"+Math.random()+"$",a=function(a){a.source===e&&"string"==typeof a.data&&0===a.data.indexOf(t)&&u(+a.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(a){e.postMessage(t+a,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var a=s.createElement("script");a.onreadystatechange=function(){u(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}():n=function(e){setTimeout(u,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var o={callback:e,args:t};return i[r]=o,n(r),r++},l.clearImmediate=c}function c(e){delete i[e]}function u(e){if(o)setTimeout(u,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(a,n)}}(t)}finally{c(e),o=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,a("yLpj"),a("8oxB"))}}]);