(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-50d5"],{"+piI":function(t,e,i){"use strict";var a=i("wTKp");i.n(a).a},"2iko":function(t,e,i){"use strict";var a=i("Qfm+");i.n(a).a},"2wuc":function(t,e,i){"use strict";i.r(e);var a=i("gDS+"),l=i.n(a),o=i("fe1z"),n={data:function(){return{value6:!0,value7:!1,start:0,length:10,total:100,tableData3:[],checktimedialog:!1,dialogVisible:!1,multipleSelection:[],unixtime:"",vcaddrs:[],str:"",addrs:[],vcaddr:"",draw:1,sizeForm:{vcaddr:"",region:"",type:"",ipaddress:"",hbinterval:"",port:"",notonline:"",localmask:"",recalltimes:"",localgateway:"",localip:"",ipgetway:"",remoteport:"",mainchannel:"",tcporudp:""},concenForm:{vcaddr:""},addconcentrator:!1,vcConfig:{channel_mod:1,local_ip:"127.0.0.1",local_port:9001,local_mask:"255.255.000.001",local_gateway:"172.016.023.255",get_ip_mod:1,remote_ip:"183.129.189.154",remote_port:65004,channel_type:2,hb_interval:60,recall_interval:30,recall_times:3,tcp_or_udp:0}}},mounted:function(){this.getinformation(),this.vcConfig=l()(this.vcConfig,null,4)},methods:{Closechecktime:function(){this.checktimedialog=!1},handleSelectionChange:function(t){this.multipleSelection=t},handleEdit:function(t,e){this.sizeForm.vcaddr=e.vcaddr,this.sizeForm.ipaddress=e.local_ip,this.sizeForm.type=String(JSON.parse(e.remote_param).channel_type),this.sizeForm.hbinterval=e.hb_interval,this.sizeForm.port=e.local_port,this.sizeForm.notonline=e.recall_interval,this.sizeForm.localmask=e.local_mask,this.sizeForm.recalltimes=e.recall_times,this.sizeForm.localgateway=e.local_gateway,this.sizeForm.localip=JSON.parse(e.remote_param).remote_ip,this.sizeForm.ipgetway=String(e.get_ip_mod),this.sizeForm.remoteport=JSON.parse(e.remote_param).remote_port,this.sizeForm.tcporudp=String(e.tcp_or_udp),this.sizeForm.region=String(e.channel_mod),this.sizeForm.mainchannel=String(e.master_channel),this.dialogVisible=!0},handledetail:function(t,e){this.$router.push({path:"/devicemanage/condetail",query:{vcaddr:e.vcaddr}})},handleSizeChange:function(t){this.length=t,this.getinformation()},handleCurrentChange:function(t){this.start=10*(t-1),this.getinformation()},getinformation:function(){var t=this;Object(o.i)(this.vcaddr,this.start,this.length,this.draw).then(function(e){e.data.map(function(t){t.vctime=Object(o.s)(t.vctime),console.log(t.iscon)}),t.tableData3=e.data,t.total=e.recordsTotal}).catch(function(t){console.log(t)})},Makesureedit:function(){var t=this,e={vcaddr:this.sizeForm.vcaddr,local_ip:this.sizeForm.ipaddress,channel_type:this.sizeForm.type,hb_interval:this.sizeForm.hbinterval,local_port:this.sizeForm.port,recall_interval:this.sizeForm.notonline,local_mask:this.sizeForm.localmask,recall_times:this.sizeForm.recalltimes,local_gateway:this.sizeForm.localgateway,remote_ip:this.sizeForm.localip,get_ip_mod:this.sizeForm.ipgetway,remote_port:this.sizeForm.remoteport,tcp_or_udp:this.sizeForm.tcporudp,channel_mod:this.sizeForm.region,master_channel:this.sizeForm.mainchannel};Object(o.m)(this.sizeForm.vcaddr,e).then(function(e){t.$message({message:"编辑成功",type:"success"}),t.dialogVisible=!1,t.getinformation()}).catch(function(t){console.log(t)})},search:function(){this.start=0,this.length=10,this.draw++,this.getinformation()},startdev:function(){var t=this;this.addrs=[],this.multipleSelection.map(function(e){t.addrs.push(e.vcaddr)}),0==this.addrs.length?this.$message({message:"请勾选您要启动的集中器",type:"warning"}):Object(o.o)(this.addrs).then(function(e){t.$message({message:"成功启动",type:"success"}),t.getinformation()})},stop:function(){var t=this;this.addrs=[],this.multipleSelection.map(function(e){t.addrs.push(e.vcaddr)}),0==this.addrs.length?this.$message({message:"请勾选您要启动的集中器",type:"warning"}):Object(o.q)(this.addrs).then(function(e){t.$message({message:"成功关闭",type:"success"}),t.getinformation()})},checktime:function(){var t=this;this.vcaddrs=[],this.unixtime=Object(o.u)(),0==this.multipleSelection.length?this.str="当前节点所有的集中器":(this.str="",this.multipleSelection.map(function(e){t.str+=e.vcaddr+",",t.vcaddrs.push(e.vcaddr)}),this.str=String(this.str).substring(0,this.str.length-1)),this.checktimedialog=!0},connect:function(t){var e=this;this.vcaddr=t,Object(o.p)(this.vcaddr).then(function(t){e.$message({message:"主站连接成功",type:"success"}),e.vcaddr="",e.getinformation()})},submitchecktime:function(){var t=this;this.vcaddrs.length>0?Object(o.r)(Object(o.t)(this.unixtime),this.vcaddrs).then(function(e){t.$message({message:"校时成功",type:"success"}),t.getinformation()}):Object(o.r)(Object(o.t)(this.unixtime)).then(function(e){t.$message({message:"校时成功",type:"success"}),t.getinformation()}),this.checktimedialog=!1},uploadadd:function(){this.addconcentrator=!0},addconcen:function(){var t=this,e=JSON.parse(this.vcConfig);e.vcaddr=this.concenForm.vcaddr,Object(o.e)(e).then(function(e){t.$message({message:"新增/更新成功",type:"success"}),t.addconcentrator=!1,t.getinformation()}).catch(function(e){t.$message({message:"'error'",type:"warning"})})}}},s=(i("+piI"),i("2iko"),i("KHd+")),r=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"concentrator"},[i("div",{staticClass:"top"},[i("label",{attrs:{for:""}},[t._v(t._s(t.$t("concentrator.concentrator"))+":")]),t._v(" "),i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("concentrator.input")},model:{value:t.vcaddr,callback:function(e){t.vcaddr=e},expression:"vcaddr"}}),t._v(" "),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.search}},[t._v(t._s(t.$t("concentrator.search")))])],1),t._v(" "),i("div",{staticClass:"section"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.uploadadd}},[t._v(t._s(t.$t("concentrator.add")))]),t._v(" "),i("el-button",{attrs:{plain:""},on:{click:t.startdev}},[t._v(t._s(t.$t("concentrator.start")))]),t._v(" "),i("el-button",{attrs:{plain:""},on:{click:t.stop}},[t._v(t._s(t.$t("concentrator.end")))]),t._v(" "),i("el-button",{attrs:{plain:""},on:{click:t.checktime}},[t._v(t._s(t.$t("concentrator.checktime")))])],1),t._v(" "),[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.tableData3,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.status"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_online?i("div",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#00cc33","margin-right":"10px"}}):t._e(),t._v(" "),1==e.row.is_online?i("span",{staticStyle:{color:"#00cc33"}},[t._v(t._s(t.$t("concentrator.isonline")))]):t._e(),t._v(" "),0==e.row.is_online?i("div",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#f00","margin-right":"10px"}}):t._e(),t._v(" "),0==e.row.is_online?i("span",{staticStyle:{color:"#f00"}},[t._v(t._s(t.$t("concentrator.notonline")))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("concentrator.concentrator"),prop:"vcaddr",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:t.$t("concentrator.courts"),align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("concentrator.onlinemeter"),sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.dev_total-e.row.dev_offline+"/"+e.row.dev_total))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.connection"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.iscon?i("el-switch",{attrs:{"active-color":"#13ce66",disabled:""},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}}):t._e(),t._v(" "),1!=e.row.iscon?i("el-switch",{attrs:{"active-color":"#cccccc",disabled:""},model:{value:t.value7,callback:function(e){t.value7=e},expression:"value7"}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"vctime",label:t.$t("concentrator.time"),align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.operation"),align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(i){t.connect(e.row.vcaddr)}}},[t._v(t._s(t.$t("concentrator.connect")))]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index,e.row)}}},[t._v(t._s(t.$t("concentrator.edit")))]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.handledetail(e.$index,e.row)}}},[t._v(t._s(t.$t("concentrator.detail")))])]}}])})],1)],t._v(" "),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"","page-sizes":[10,25,50,100],"page-size":t.length,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"集中器基本信息",visible:t.dialogVisible,width:"35%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.sizeForm}},[i("el-form-item",[i("span",[t._v("集中器地址")]),t._v(" "),i("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(t.sizeForm.vcaddr))])]),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"通信工作模式"}},[i("el-select",{model:{value:t.sizeForm.region,callback:function(e){t.$set(t.sizeForm,"region",e)},expression:"sizeForm.region"}},[i("el-option",{attrs:{label:"客户机模式",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"混合模式",value:"0"}}),t._v(" "),i("el-option",{attrs:{label:"服务器模式",value:"3"}})],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"通道类型"}},[i("el-select",{model:{value:t.sizeForm.type,callback:function(e){t.$set(t.sizeForm,"type",e)},expression:"sizeForm.type"}},[i("el-option",{attrs:{label:"GPRS/CDMA",value:"2"}}),t._v(" "),i("el-option",{attrs:{label:"PSTN",value:"3"}}),t._v(" "),i("el-option",{attrs:{label:"Ethernet",value:"4"}}),t._v(" "),i("el-option",{attrs:{label:"RS232/RS485",value:"6"}}),t._v(" "),i("el-option",{attrs:{label:"CSD",value:"7"}}),t._v(" "),i("el-option",{attrs:{label:"Radio",value:"8"}})],1)],1)],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"终端IP地址"}},[i("el-input",{model:{value:t.sizeForm.ipaddress,callback:function(e){t.$set(t.sizeForm,"ipaddress",e)},expression:"sizeForm.ipaddress"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"心跳间隔"}},[i("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.hbinterval,callback:function(e){t.$set(t.sizeForm,"hbinterval",e)},expression:"sizeForm.hbinterval"}})],1),t._v(" "),i("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"TCP监听端口"}},[i("el-input",{model:{value:t.sizeForm.port,callback:function(e){t.$set(t.sizeForm,"port",e)},expression:"sizeForm.port"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播间隔"}},[i("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.notonline,callback:function(e){t.$set(t.sizeForm,"notonline",e)},expression:"sizeForm.notonline"}})],1),t._v(" "),i("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"终端子网掩码"}},[i("el-input",{model:{value:t.sizeForm.localmask,callback:function(e){t.$set(t.sizeForm,"localmask",e)},expression:"sizeForm.localmask"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播次数"}},[i("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.recalltimes,callback:function(e){t.$set(t.sizeForm,"recalltimes",e)},expression:"sizeForm.recalltimes"}})],1)],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"终端网关地址"}},[i("el-input",{model:{value:t.sizeForm.localgateway,callback:function(e){t.$set(t.sizeForm,"localgateway",e)},expression:"sizeForm.localgateway"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站通信地址"}},[i("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.localip,callback:function(e){t.$set(t.sizeForm,"localip",e)},expression:"sizeForm.localip"}})],1)],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"IP地址获取方式"}},[i("el-select",{model:{value:t.sizeForm.ipgetway,callback:function(e){t.$set(t.sizeForm,"ipgetway",e)},expression:"sizeForm.ipgetway"}},[i("el-option",{attrs:{label:"自动设置",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"手动设置",value:"0"}})],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站端口号"}},[i("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.remoteport,callback:function(e){t.$set(t.sizeForm,"remoteport",e)},expression:"sizeForm.remoteport"}})],1)],1),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{attrs:{label:"TCP/UDP标识"}},[i("el-select",{model:{value:t.sizeForm.tcporudp,callback:function(e){t.$set(t.sizeForm,"tcporudp",e)},expression:"sizeForm.tcporudp"}},[i("el-option",{attrs:{label:"TCP",value:"0"}}),t._v(" "),i("el-option",{attrs:{label:"UDP",value:"1"}})],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主通道类型"}},[i("el-select",{model:{value:t.sizeForm.mainchannel,callback:function(e){t.$set(t.sizeForm,"mainchannel",e)},expression:"sizeForm.mainchannel"}},[i("el-option",{attrs:{label:"虚拟集中器通道",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"物理集中器通道",value:"2"}})],1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.Makesureedit}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"新增集中器",visible:t.addconcentrator,width:"35%",center:""},on:{"update:visible":function(e){t.addconcentrator=e}}},[i("el-form",{ref:"form",attrs:{model:t.concenForm}},[i("el-form-item",[i("label",{attrs:{for:""}},[t._v("集中器地址")]),t._v(" "),i("el-input",{staticStyle:{"margin-bottom":"20px"},model:{value:t.concenForm.vcaddr,callback:function(e){t.$set(t.concenForm,"vcaddr",e)},expression:"concenForm.vcaddr"}})],1),t._v(" "),i("label",[i("span",{staticClass:"startUp"},[t._v("启动配置")]),t._v("[JSON]:")]),t._v(" "),i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",rows:18},model:{value:t.vcConfig,callback:function(e){t.vcConfig=e},expression:"vcConfig"}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.addconcentrator=!1}}},[t._v("关闭")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addconcen}},[t._v("新增/更新")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"校时",visible:t.checktimedialog,width:"30%","before-close":t.Closechecktime},on:{"update:visible":function(e){t.checktimedialog=e}}},[i("div",[i("h3",[t._v("集中器地址")]),t._v(" "),i("el-input",{attrs:{disabled:""},model:{value:t.str,callback:function(e){t.str=e},expression:"str"}})],1),t._v(" "),i("div",[i("h3",[t._v("Unix时间戳")]),t._v(" "),i("el-input",{model:{value:t.unixtime,callback:function(e){t.unixtime=e},expression:"unixtime"}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.checktimedialog=!1}}},[t._v("关 闭")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.submitchecktime()}}},[t._v("提 交")])],1)])],2)},[],!1,null,"45b7ad97",null);r.options.__file="concentrator.vue";e.default=r.exports},"Qfm+":function(t,e,i){},wTKp:function(t,e,i){}}]);