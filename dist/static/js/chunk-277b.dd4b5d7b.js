(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-277b"],{"9eRe":function(e,t,r){"use strict";r.r(t);var a=r("gDS+"),n=r.n(a),o=r("YEIV"),l=r.n(o),s=r("v0iw"),u={data:function(){return l()({data:[],treeprops:{value:"objectId",label:"name"},ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",departmentid:[]},id:""},"treeprops",{value:"objectId",label:"name"})},computed:{treeData:function(){var e=JSON.parse(n()(this.data));return e.filter(function(t){var r=e.filter(function(e){return t.objectId==e.ParentId});return r.length>0&&(t.children=r),0==t.ParentId})}},mounted:function(){this.editUser()},methods:{editUser:function(){var e=this,t=this.$route.query.id,r=new s.Parse.User;new s.Parse.Query(r).get(t).then(function(t){e.ruleForm2.username=t.attributes.nick,e.ruleForm2.phone=t.attributes.phone,e.ruleForm2.account=t.attributes.username,e.ruleForm2.email=t.attributes.email,e.getDepartment()})},editoruser:function(e){var t=this,r=new s.Parse.User;new s.Parse.Query(r).get(this.$route.query.id).then(function(e){if(0==t.ruleForm2.departmentid.length);else{var r=new(s.Parse.Object.extend("Department"));r.set("objectId",t.ruleForm2.departmentid[t.ruleForm2.departmentid.length-1]),e.set("department",r)}e.set("username",t.ruleForm2.account),e.set("nick",t.ruleForm2.username),e.set("phone",t.ruleForm2.phone),e.set("email",t.ruleForm2.email),e.save().then(function(e){t.$message({message:"更改成功",type:"success"}),t.$router.push({path:"/roles/structure"})}).catch(console.log("error"))})},getDepartment:function(){var e=this,t=s.Parse.Object.extend("Department");new s.Parse.Query(t).find().then(function(t){t.map(function(t){var r={};t.createtime=new Date(t.attributes.createdAt).toLocaleDateString(),r.name=t.attributes.name,r.ParentId=t.attributes.ParentId,r.objectId=t.id,r.level=t.attributes.level,r.createtime=t.createtime,e.data.push(r)})})}}},i=(r("S+dJ"),r("KHd+")),m=Object(i.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edituser"},[r("div",{staticClass:"admin",staticStyle:{"margin-bottom":"20px"}},[e._v("编辑用户")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"账号",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",t)},expression:"ruleForm2.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入手机号",maxlength:11},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",e._n(t))},expression:"ruleForm2.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm2.email,callback:function(t){e.$set(e.ruleForm2,"email",t)},expression:"ruleForm2.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{attrs:{placeholder:"2-5个文字",maxlength:5},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门选择"}},[r("el-cascader",{staticStyle:{width:"600px"},attrs:{placeholder:"请选择部门",props:e.treeprops,options:e.treeData,"auto-complete":"off","show-all-levels":!1,"change-on-select":""},model:{value:e.ruleForm2.departmentid,callback:function(t){e.$set(e.ruleForm2,"departmentid",t)},expression:"ruleForm2.departmentid"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editoruser(e.ruleForm2)}}},[e._v("保存")])],1)],1)],1)},[],!1,null,"4c3a3167",null);m.options.__file="edituser.vue";t.default=m.exports},"S+dJ":function(e,t,r){"use strict";var a=r("mW44");r.n(a).a},mW44:function(e,t,r){}}]);