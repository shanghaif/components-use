(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-430d"],{B7f2:function(t,e,a){"use strict";a.r(e);var i=a("gDS+"),s=a.n(i),n=a("v0iw"),o=void 0,l=void 0,r={data:function(){return{tableData:[],rowdata:"",dialogVisible:!1,pagesize:10,total:0,start:0,productid:""}},mounted:function(){this.getDevices(this.pagesize,this.start)},methods:{handleSizeChange:function(t){this.pagesize=t,this.getDevices(this.pagesize,this.start)},handleCurrentChange:function(t){this.start=Number(t-1)*Number(this.pagesize),this.getDevices(this.pagesize,this.start)},handleEdit:function(t){},getDevices:function(t,e){var a=this,i=n.Parse.Object.extend("Product"),s=new n.Parse.Query(i);s.equalTo("devType","pump"),s.find().then(function(i){a.productid=i[0].id,o=n.Parse.Object.extend("Devices"),(l=new n.Parse.Query(o)).equalTo("product",a.productid),l.limit(t),l.skip(e),l.count().then(function(t){a.total=t,l.find().then(function(t){t.map(function(t){"CAMERA"==t.attributes.basedata.type?t.attributes.basedata.type="摄像头":"PC"==t.attributes.basedata.type?t.attributes.basedata.type="控制台":"DTU"==t.attributes.basedata.type?t.attributes.basedata.type="控制器":"ANDROID"==t.attributes.basedata.type&&(t.attributes.basedata.type="平板")}),a.tableData=t})})})},addJson:function(t){this.rowdata=s()(t.attributes.basedata.config,null,4),this.dialogVisible=!0}}},c=(a("C72O"),a("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"device"},[a("h3",[t._v("采证设备")]),t._v(" "),a("div",{staticClass:"deviceslist",staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"设备名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.attributes.basedata.type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设备编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.attributes.devaddr))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["offline"==e.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[t._v(t._s("离线"))]):"running"==e.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[t._v(t._s("忙碌"))]):a("span",{staticStyle:{color:"green"}},[t._v(t._s("在线"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.row.objectId)}}},[t._v("控制 面板")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.addJson(e.row)}}},[t._v("配 置")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"配置信息",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-content"},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.rowdata,callback:function(e){t.rowdata=e},expression:"rowdata"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},[],!1,null,"c8de9012",null);u.options.__file="devicepump.vue";e.default=u.exports},C72O:function(t,e,a){"use strict";var i=a("i6B+");a.n(i).a},"i6B+":function(t,e,a){}}]);