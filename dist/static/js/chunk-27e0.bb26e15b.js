(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-27e0"],{"8SHQ":function(e,t,n){"use strict"},"A1/j":function(e,t,n){"use strict";var o=n("oid6");n.n(o).a},Cl1Y:function(e,t,n){},IBzE:function(e,t,n){"use strict";var o=n("fMfV");n.n(o).a},c11S:function(e,t,n){"use strict";var o=n("Cl1Y");n.n(o).a},dWpY:function(e,t,n){e.exports=n.p+"static/img/login_background.a047bb8.png"},fMfV:function(e,t,n){},ntYl:function(e,t,n){"use strict";n.r(t);var o=n("gDS+"),i=n.n(o),s=n("YEIV"),r=n.n(s),a=n("Yfch"),c=n("fe1z"),l=n("p46w"),u=n.n(l),h=n("v0iw"),d=(n("X4fA"),n("8SHQ"),n("xiB2")),p=n("Womt"),g={name:"Pointwave",props:{amountX:{type:Number,default:50},amountY:{type:Number,default:50},color:{type:Number,default:16777215},top:{type:Number,default:0}},data:function(){return{count:0,mouseX:0,windowHalfX:null,camera:null,scene:null,particles:null,renderer:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=window.innerWidth,t=window.innerHeight,n=document.createElement("div");this.windowHalfX=window.innerWidth/2,n.style.position="relative",n.style.top=this.top+"px",n.style.height=t-this.top+"px",document.getElementById("indexLizi").appendChild(n),this.camera=new p.d(75,e/t,1,1e4),this.camera.position.z=1e3,this.scene=new p.f;for(var o=this.amountX*this.amountY,i=new Float32Array(3*o),s=new Float32Array(o),r=0,a=0,c=0;c<this.amountX;c++)for(var l=0;l<this.amountY;l++)i[r]=100*c-100*this.amountX/2,i[r+1]=0,i[r+2]=100*l-100*this.amountY/2,s[a]=1,r+=3,a++;var u=new p.b;u.addAttribute("position",new p.a(i,3)),u.addAttribute("scale",new p.a(s,1));var h=new p.g({uniforms:{color:{value:new p.c(this.color)}},vertexShader:"\n          attribute float scale;\n          void main() {\n            vec4 mvPosition = modelViewMatrix * vec4( position, 2.0 );\n            gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n            gl_Position = projectionMatrix * mvPosition;\n          }\n        ",fragmentShader:"\n          uniform vec3 color;\n          void main() {\n            if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\n            gl_FragColor = vec4( color, 1.0 );\n          }\n        "});this.particles=new p.e(u,h),this.scene.add(this.particles),this.renderer=new p.h({antialias:!0,alpha:!0}),this.renderer.setSize(n.clientWidth,n.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearAlpha(0),n.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,{passive:!1}),document.addEventListener("mousemove",this.onDocumentMouseMove,{passive:!1}),document.addEventListener("touchstart",this.onDocumentTouchStart,{passive:!1}),document.addEventListener("touchmove",this.onDocumentTouchMove,{passive:!1})},render:function(){this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y=400,this.camera.lookAt(this.scene.position);for(var e=this.particles.geometry.attributes.position.array,t=this.particles.geometry.attributes.scale.array,n=0,o=0,i=0;i<this.amountX;i++)for(var s=0;s<this.amountY;s++)e[n+1]=100*Math.sin(.3*(i+this.count))+100*Math.sin(.5*(s+this.count)),t[o]=8*(Math.sin(.3*(i+this.count))+1)+8*(Math.sin(.5*(s+this.count))+1),n+=3,o++;this.particles.geometry.attributes.position.needsUpdate=!0,this.particles.geometry.attributes.scale.needsUpdate=!0,this.renderer.render(this.scene,this.camera),this.count+=.1},animate:function(){requestAnimationFrame(this.animate),this.render()},onDocumentMouseMove:function(e){this.mouseX=e.clientX-this.windowHalfX},onDocumentTouchStart:function(e){1===e.touches.length&&(this.mouseX=e.touches[0].pageX-this.windowHalfX)},onDocumentTouchMove:function(e){1===e.touches.length&&(e.preventDefault(),this.mouseX=e.touches[0].pageX-this.windowHalfX)},onWindowResize:function(){this.windowHalfX=window.innerWidth/2,this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}},m=n("KHd+"),f=Object(m.a)(g,function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"indexLizi"}})},[],!1,null,null,null);f.options.__file="index.vue";var v={name:"Login",components:{Pointwave:f.exports},data:function(){var e;return e={title:"",loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:function(e,t,n){Object(a.b)(t)?n():n(new Error("请输入正确的用户名"))}}],password:[{required:!0,trigger:"blur",validator:function(e,t,n){t.length<5?n(new Error("密码不能小于5位")):n()}}]},loading:!1,pwdType:"password",redirect:void 0,checked:!1,imgsrc:n("wShP"),logosrc:"",backgroundsrc:n("dWpY")},r()(e,"redirect",void 0),r()(e,"routes",[]),e},methods:{getTitle:function(){var e=this,t=window.location.pathname;t=""==(t=t.slice(5,t.length))?"develop":t,h.Parse.User.logOut(),Object(c.b)(t).then(function(n){e.title=n.title,e.logosrc=n.logo,sessionStorage.setItem("product_title",n.title),sessionStorage.setItem("dashboard",n.dashboard),sessionStorage.setItem("imgsrc",n.logo),sessionStorage.setItem("copyright",n.copyright),sessionStorage.setItem("roletype",t)})},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var e=this;this.routes=[],this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loginForm;h.Parse.User.logIn(e.loginForm.username,e.loginForm.password).then(function(t){Object(d.c)(t.attributes.sessionToken),u.a.set("sessionToken",t.attributes.sessionToken);var n=h.Parse.Object.extend("Navigation");new h.Parse.Query(n).find().then(function(n){n.map(function(t){t.attributes.parent&&e.routes.push(t)}),sessionStorage.setItem("username",t.attributes.username),sessionStorage.setItem("roles",t.attributes.roles[0].alias),sessionStorage.setItem("list",i()(e.routes)),sessionStorage.setItem("token",t.attributes.sessionToken),sessionStorage.setItem("type","vcon"),e.$router.push({path:e.redirect||"/dashboard"})})}).catch(function(t){101==t.code?-1==t.message.indexOf("Invalid")?e.$message({type:"warning",message:"密码输入错误次数过多，该账户已被锁住"}):e.$message({type:"warning",message:"用户名或密码错误"}):e.$message({type:"warning",message:t.message})})})},register:function(){this.$router.push({path:"/register"})},phonelogin:function(){this.$router.push({path:"/phonelogin",query:{action:"login"}})}},created:function(){this.getTitle(),sessionStorage.setItem("list","[]")}},w=(n("c11S"),n("IBzE"),n("A1/j"),Object(m.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"loginbanner"},[n("Pointwave",{staticStyle:{width:"100%",height:"100%"}}),e._v(" "),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"logo"},[n("p",[e._v("JohnQian")])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),n("el-input",{attrs:{name:"username",type:"text","auto-complete":"on",placeholder:"请输入手机号/用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),n("el-input",{attrs:{name:"password","auto-complete":"on",placeholder:"请输入密码",type:e.pwdType},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),n("div",{staticStyle:{"margin-bottom":"40px",height:"30px","line-height":"30px"}},[n("el-checkbox",{staticStyle:{float:"left",color:"#409EFF"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#409EFF","font-size":"14px",cursor:"pointer"},on:{click:e.register}},[e._v("注册用户")]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#409EFF","font-size":"14px",cursor:"pointer","margin-right":"20px"},on:{click:e.phonelogin}},[e._v("手机号登录")])],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%","letter-spacing":"10px"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登陆")])],1)],1)],1)])},[],!1,null,"7c578291",null));w.options.__file="index.vue";t.default=w.exports},oid6:function(e,t,n){},wShP:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAABPJJREFUWAm1lutvVFUUR6eKChUfFajSCqWhIqAGTIwxGFSMMcb4ivpFYuLfZqLR+Ih+QWNIJAYlBvGDYiNalUeFIiLgs1pAXet69uTMnTPTGVp/yZp7XvfeffbeZ98ZaPSvZdyyJrGa65WwBC4HdRZOwyn4Bv6AnjXQ88pGYx1r74HRPu75h7WH4SBo3LzqxaAxnrINRmpP82V64hewLT5vJVwPdR1nYA/8UJ/I+90MuoyF2+Gu7IaLtKdgEnzBeShpkEHDuRFuhfw9n9DfC26gTfnCfHIpncdgLBv8jPY+6CsnWK+33NQd4CbVd7AL5uzkKhmkMTthKC08x9WbT6b+pV4M+eOwPD3A0L0GLUbFyUhrqh08SeemNGBY3gCNWqh+5QFfwo1wHWjYKvgKmqobdB8zm9OsxrwOLTtIc5d6Mee+BlPhGjAKloyjUCk3yEUPpXE9omfmM2YFazaBibsBPGEm9F/QKeH/Zs4c8p6rYDT1f+fakv3P0R9xEL0M3XJmHfOewGEoydM4Cfvh59ICxgzd82nOaLxqOzw0TvtuB5Cn6fOq1f7jer24A65un26OeJp84Rb4Cc5AXXrEE2geXQs/wpkw6JE06M7ehpK7PZFPgCHKpQfMgRmYBQ2N52qYofTlpYKoEVvBZ/sJOmRCLQPjqKagU53Zxtx6FyX5kt3wbQyk6xVc9cy94PN9mV7VoLpRbsZTtgnGYdAdrIHQZDRqV49phNSpE/Ai1I1x7jwcgFfA5FZhlNe6THDl3IQ7WGsPWcpNrpKstFFlfeE7YHi66RSTHg43E9J79ZN7LCa5DmtQFMHTtH1ZSRPZ4D7anU5OtqxqnuVXuskU8d2WjJXu2mRSfrVLsoAtzyYOZe3FapqPakiD9JIyZCXlx1t3/1ZatMAxT3clDYoj2smgtPR/vVxIT7+oQaHSCXAu3Gnb8Obhc2wxFHZcsBFJZ1KV5Fc6D9PG0qIFjvlNVHMaZIYry7gfxpKmskELZH6Us6m2pp8P61fgJ6Iuc9h3qxkNsl6EogREP66f0vArrawlj4IVvptuYPIZ2J7w666367IwR7pMa5DVNhLaEl6SdWd/NjFC+wXIPyUxrcF+n/yS50bvoR/vodnU5mar0ZjWXSbtERgHd/EhlAqfBXEVhBGWg6fSWv+qWBKsWRobtY1mpff5/T6184sGT6SB41xn48hbBzRG1zkW3xeaLTKXBsHcCC2l4YFwzFyIZ9Kswvwu14N2CnqAMTegdsO5uNn/K3rIIz0MRyE/WXQr6XKNnQGNyIsm3abMty9gF5Q840K9/TDohBNgZJrJZHs17LSBTL6XwO9MN61gcgw8PYbJULs5DS5tiOFKetV3Df3Xrf67H7OtdbkepHNnGtBLb4HhXEwZladhbXroAa4fpHZLvB3TCGNqLohH0hB1+hfAVF/SMx6EMMb3vQfN0xc5xFglJywD68HkNRQbQHfOFz6WdJU58yxErfML8Sa0bLZuEPNViPyL4Y1WZHe1BUx4/wPPQT/y/vvBBI66pGc05k9o0UBLr7Vj0dwBW7Nh82kSDoNe62Sc994Mt8EtYLEMmTN7wZPYpm4GxeJRGhqW1x7nDK+nyVDqdlkCnjyxncuj/RG4kY7qxSBvdp2F83YYg35kBf4YjvRyU68G5c8ylybAJNUTUUsMp3+0DONJ0BPTMAs9619UBfTrj4xS0AAAAABJRU5ErkJggg=="},xiB2:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s});var o=sessionStorage.getItem("token"),i={topic:"web/"+o,qos:2};function s(e){i={topic:"web/"+(o=e),qos:2}}function r(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var o in n)if(new RegExp("("+o+")").test(t)){var i=n[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:c(i))}return t}var a=[];function c(e){return("00"+e).substr(e.length)}var l={modName:"websocket",client:null,connState:!1,cInfo:{host:location.hostname,port:8083,clientId:"C_"+(new Date).getTime(),userName:"test",password:"test123",keepAlive:null,keepAliveInterval:10,cleanSession:!1},sendInfo:"{}",tablelist:[],subInfo:i,originrecivedata:[],send:function(){var e=JSON.parse(this.sendInfo);console.log(e),this.sendMessage(e)},log:function(e){try{e=JSON.parse(e)}catch(e){}console.log(111)},newClient:function(){this.client=new Paho.MQTT.Client(this.cInfo.host,Number(this.cInfo.port),this.cInfo.clientId)},sslPort:function(){var e=this.cInfo.useSSL;this.cInfo.port=e?8084:8083},recive:function(e){console.log(e)},connect:function(){var e=this;if(!e.client.isConnected()){e.client.onConnectionLost=function(t){0!==t.errorCode?(console.log("onConnectionLost: "+t.errorMessage),setTimeout(function(){e.connect()},5e3)):window.clearTimeout()},e.client.onMessageArrived=function(t){try{t.msgString=t.payloadString}catch(e){t.msgString="Binary message("+t.payloadBytes.length+")"}e.recive(t.payloadString)};var t={onFailure:function(t){e.connState=!1,console.log("连接失败 "+t.errorMessage),setTimeout(function(){e.connect()},5e3)},onSuccess:function(){e.connState=!0,e.subscribe(e.subInfo,function(t){t.result&&(console.log(e.subInfo),console.log("订阅成功"))})}},n=e.cInfo.userName,o=e.cInfo.password,i=e.cInfo.keepAlive,s=e.cInfo.cleanSession;n&&(t.userName=n),o&&(t.password=o),i&&(t.keepAliveInterval=Number(i)),t.cleanSession=s,e.client.connect(t)}},disconnect:function(){var e=this;e.client&&this.client.isConnected()&&(e.client.disconnect(),e.client=null),console.log("已经断开连接！"),e.connState=!1,setTimeout(function(){e.connect()},5e3)},subscribe:function(e,t){if(!this.client||!this.client.isConnected())return console.log("当前尚未连接"),void this.connect();e.topic?this.client.subscribe(e.topic,{qos:Number(e.qos),onSuccess:function(n){e.msg=n,console.log(e.msg),e.result=!0,t&&t(e)},onFailure:function(n){128===n.errorCode[0]&&console.log("The topic cannot SUBSCRIBE for ACL Deny"),e.msg=n,console.log(n),e.result=!1,t&&t(e)}}):console.log("topic为空！")},unsubscribe:function(e,t){return this.client&&this.client.isConnected()?e.topic?void this.client.unsubscribe(e.topic,{onSuccess:function(n){e.msg=n,console.log(e),e.result=!0,t&&t(e)},onFailure:function(n){e.msg=n,console.log(n),e.result=!0,t&&t(e)}}):(this.tablelist.push({date:r(new Date,"yyyy-MM-dd hh:mm"),content:"topic为空！"}),void console.log("topic为空！")):(this.tablelist.push({date:r(new Date,"yyyy-MM-dd hh:mm"),content:"当前尚未连接"}),console.log("当前尚未连接"),void this.connect())},sendMessage:function(e){var t=e.text;if(!this.client||!this.client.isConnected())return console.log("当前尚未连接"),void this.connect();if(e.topic)if(t){var n=new Paho.MQTT.Message(t);n.destinationName=e.topic,n.qos=Number(e.qos),n.retained=e.retained,this.client.send(n),console.log(e)}else console.log("消息内容为空！");else console.log("topic为空！")}}}}]);