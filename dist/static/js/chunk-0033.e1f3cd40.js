(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0033"],{"9R0h":function(e,t,n){},IRQ8:function(e,t,n){var o=n("MT78").extendComponentView({type:"bmap",render:function(e,t,n){var o=!0,a=e.getBMap(),i=n.getZr().painter.getViewportRoot(),r=e.coordinateSystem,s=function(t,a){if(!o){var s=i.parentNode.parentNode.parentNode,l=[-parseInt(s.style.left,10)||0,-parseInt(s.style.top,10)||0];i.style.left=l[0]+"px",i.style.top=l[1]+"px",r.setMapOffset(l),e.__mapOffset=l,n.dispatchAction({type:"bmapRoam"})}};function l(){o||n.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",s),a.addEventListener("zoomend",l),this._oldMoveHandler=s,this._oldZoomEndHandler=l;var p=e.get("roam");p&&"scale"!==p?a.enableDragging():a.disableDragging(),p&&"move"!==p?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var m=e.__mapStyle,c=e.get("mapStyle")||{},d=JSON.stringify(c);JSON.stringify(m)!==d&&(Object.keys(c).length&&a.setMapStyle(c),e.__mapStyle=JSON.parse(d)),o=!1}});e.exports=o},KGRP:function(e,t,n){"use strict";n.r(t);var o=n("m1cH"),a=n.n(o),i=(n("oAqT"),n("n6ya")),r=(n("hnqx"),{name:"Map",data:function(){return{chart:this.$echarts.ECharts,bmap:{},linesSeries:[],scatterSeries:[],effectScatterSeries:[],mapZoom:6,trainIcon:"path://M678.4 122.9c75.1-11.3 145.5 11.7 202.6 65.8 58 54.9 85.7 127.4 77.9 203.3-7.9 75-48.8 149-117.8 214.4-19.3 18.3-71 67.5-145.1 138.2-33.3 31.8-68.9 65.7-104.6 99.8l-34.8 33.1-13.8 13.2c-16.6 15.8-43 15.8-59.6 0L363.1 775.9l-25.4-24.2c-50.9-48.5-101.9-97-152.8-145.4C116 541 75 466.9 67.1 391.8c-7.9-76 19.9-148.3 77.9-203.3 57.1-54.1 127.6-77.1 202.6-65.8 55.8 8.5 112.3 35.4 165.4 78.5 53.2-43 109.7-70 165.4-78.3z"}},mounted:function(){this.initMap()},methods:{initMap:function(){this.chart=this.$echarts.init(this.$refs.map),this.getLineSeries(),this.getScatterSeries(),this.getEffectScatterSeries(),this.chart.setOption({animation:!1,legend:{orient:"vertical",top:30,left:30,data:i.map(function(e){return e.name}),textStyle:{color:"#222222"},selectedMode:"multiple"},bmap:{center:[104.114129,37.550339],zoom:6,roam:!0,scaleLimit:{min:6,max:12}},series:[].concat(a()(this.linesSeries),a()(this.scatterSeries),a()(this.effectScatterSeries))}),this.bmap=this.chart.getModel().getComponent("bmap").getBMap(),this.bmap.setMinZoom(6),this.bmap.setMaxZoom(12),this.bmap.addControl(new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT}));var e=this;this.bmap.addEventListener("zoomend",function(){e.mapZoom=e.bmap.getZoom()})},getLineSeries:function(){var e=[];i.forEach(function(t){e.push({name:t.name,type:"lines",coordinateSystem:"bmap",silent:!0,polyline:!0,lineStyle:{color:t.primaryColor},z:3,data:[{coords:t.stations.map(function(e){return e.value}),lineStyle:{normal:{type:"solid",color:t.bgColor,width:4,opacity:.6}}},{coords:t.stations.map(function(e){return e.value}),lineStyle:{normal:{type:"dashed",color:t.primaryColor,width:4}}}]})}),this.linesSeries=e},getScatterSeries:function(){var e=[];i.forEach(function(t){e.push({name:t.name,type:"scatter",coordinateSystem:"bmap",symbol:"circle",symbolSize:10,z:4,label:{normal:{formatter:"{b}",position:"right",color:"#777777",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#FFFFFF",borderColor:"#777777",borderWidth:2}},data:t.stations})}),this.scatterSeries=e},getEffectScatterSeries:function(){var e=this,t=[],n=[{id:1,name:"兔子",lineId:1,pre:{id:8,name:"西宁",value:[101.82139605321802,36.62634069485973]},next:{id:9,name:"乌鲁木齐",value:[87.53582115349052,43.847009771041094]},travlled:.3},{id:2,name:"乌龟",lineId:1,pre:{id:5,name:"太原",value:[112.61726434350447,37.79736828479828]},next:{id:4,name:"石家庄",value:[114.4712305290683,38.07207484076872]},travlled:.3},{id:22,name:"火箭",lineId:2,pre:{id:18,name:"长沙",value:[113.071503,28.152942]},next:{id:19,name:"广州",value:[113.264437,23.154981]},travlled:.3},{id:3,name:"带鱼",lineId:2,pre:{id:11,name:"哈尔滨",value:[126.71808,45.794479]},next:{id:12,name:"长春",value:[125.330802,43.917542]},travlled:.3}];i.forEach(function(o){var a=n.filter(function(e){return e.lineId===o.id});if(a&&a.length>0){var i=a.map(function(e){return{itemStyle:{normal:{color:"red"},emphasis:{color:"red"}},label:{normal:{formatter:"{p2|"+e.name+"}\n                              {p3|\n当前位置："+e.pre.name+"}\n                              {p4|\n即将到达："+e.next.name+"}",rich:{img:{backgroundColor:{image:e.screenshot}}}}},value:function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}(e.pre.value,e.next.value,e.travlled)}});t.push({name:o.name,type:"effectScatter",coordinateSystem:"bmap",symbol:e.trainIcon,symbolSize:[10,10],legendHoverLink:!0,z:6,effectType:"ripple",rippleEffect:{period:2,scale:5,brushType:"fill"},label:{normal:{show:!1,position:["500%","300%"],distance:20,color:"#222222",align:"center",backgroundColor:"#FFFFFF",borderRadius:5,padding:20,shadowColor:"rgba(0,0,0,0.16)",shadowBlur:6,shadowOffsetX:0,shadowOffsetY:3,width:200,rich:{p2:{fontSize:16,color:"#222222",fontWeight:"bolder",lineHeight:40},p3:{fontSize:14,color:"#222222",lineHeight:18},p4:{fontSize:14,color:"#222222",lineHeight:18}}},emphasis:{show:!0}},data:i})}}),this.effectScatterSeries=t},attribute:function(e){var t=e.target;alert("marker的位置是"+t.getPosition().lng+","+t.getPosition().lat)}}}),s=(n("bEfV"),n("KHd+")),l=Object(s.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"map",staticClass:"map"})},[],!1,null,"3186063a",null);l.options.__file="testbaidu.vue";t.default=l.exports},Suk3:function(e,t,n){var o,a=n("MT78"),i=a.util,r=a.graphic,s=a.matrix;function l(e,t){this._bmap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t,this._projection=new BMap.MercatorProjection}function p(e,t){return t=t||[0,0],i.map([0,1],function(n){var o=t[n],a=e[n]/2,i=[],r=[];return i[n]=o-a,r[n]=o+a,i[1-n]=r[1-n]=t[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(r)[n])},this)}l.prototype.dimensions=["lng","lat"],l.prototype.setZoom=function(e){this._zoom=e},l.prototype.setCenter=function(e){this._center=this._projection.lngLatToPoint(new BMap.Point(e[0],e[1]))},l.prototype.setMapOffset=function(e){this._mapOffset=e},l.prototype.getBMap=function(){return this._bmap},l.prototype.dataToPoint=function(e){var t=new BMap.Point(e[0],e[1]),n=this._bmap.pointToOverlayPixel(t),o=this._mapOffset;return[n.x-o[0],n.y-o[1]]},l.prototype.pointToData=function(e){var t=this._mapOffset;return[(e=this._bmap.overlayPixelToPoint({x:e[0]+t[0],y:e[1]+t[1]})).lng,e.lat]},l.prototype.getViewRect=function(){var e=this._api;return new r.BoundingRect(0,0,e.getWidth(),e.getHeight())},l.prototype.getRoamTransform=function(){return s.create()},l.prototype.prepareCustoms=function(e){var t=this.getViewRect();return{coordSys:{type:"bmap",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(p,this)}}},l.dimensions=l.prototype.dimensions,l.create=function(e,t){var n,a=t.getDom();e.eachComponent("bmap",function(e){var i=t.getZr().painter,r=i.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(o=o||function(){function e(e){this._root=e}return e.prototype=new BMap.Overlay,e.prototype.initialize=function(e){return e.getPanes().labelPane.appendChild(this._root),this._root},e.prototype.draw=function(){},e}(),n)throw new Error("Only one bmap component can exist");if(!e.__bmap){var s=a.querySelector(".ec-extension-bmap");s&&(r.style.left="0px",r.style.top="0px",a.removeChild(s)),(s=document.createElement("div")).style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),a.appendChild(s);var p=e.__bmap=new BMap.Map(s),m=new o(r);p.addOverlay(m),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}p=e.__bmap;var c=e.get("center"),d=e.get("zoom");if(c&&d){var u=new BMap.Point(c[0],c[1]);p.centerAndZoom(u,d)}(n=new l(p,t)).setMapOffset(e.__mapOffset||[0,0]),n.setZoom(d),n.setCenter(c),e.coordinateSystem=n}),e.eachSeries(function(e){"bmap"===e.get("coordinateSystem")&&(e.coordinateSystem=n)})};var m=l;e.exports=m},XZnV:function(e,t,n){var o=n("MT78").extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(e,t){this.option.center=e,this.option.zoom=t},centerOrZoomChanged:function(e,t){var n=this.option;return!(function(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}(e,n.center)&&t===n.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},roam:!1}});e.exports=o},bEfV:function(e,t,n){"use strict";var o=n("9R0h");n.n(o).a},hnqx:function(e){e.exports={}},n6ya:function(e){e.exports=[{id:1,name:"东西线",stations:[{id:1,name:"北京",value:[116.38489770446915,39.871343476772445],start:"北京"},{id:2,name:"廊坊",value:[116.7122919288889,39.51889293122433]},{id:3,name:"天津",value:[117.06714053191496,39.06262646040431]},{id:4,name:"石家庄站",value:[114.4712305290683,38.07207484076872]},{id:5,name:"太原",value:[112.61726434350447,37.79736828479828]},{id:6,name:"西安",value:[108.94505006818304,34.38216118776803]},{id:7,name:"兰州",value:[103.89904509514152,36.03646139505536]},{id:8,name:"西宁",value:[101.82139605321802,36.62634069485973]},{id:9,name:"乌鲁木齐",value:[87.53582115349052,43.847009771041094],end:"乌鲁木齐"}],primaryColor:"#A56743",bgColor:"#EDE1D9"},{id:2,name:"南北线",stations:[{id:11,name:"哈尔滨",value:[126.71808,45.794479]},{id:12,name:"长春",value:[125.330802,43.917542]},{id:13,name:"沈阳",value:[123.442617,41.825187]},{id:14,name:"北京",value:[116.38489770446915,39.871343476772445]},{id:15,name:"石家庄",value:[114.4712305290683,38.07207484076872]},{id:16,name:"郑州",value:[113.661999,34.75259]},{id:17,name:"武汉",value:[114.430977,30.612766]},{id:18,name:"长沙",value:[113.071503,28.152942]},{id:19,name:"广州",value:[113.264437,23.154981]}],primaryColor:"#479CD4",bgColor:"#DAEBF6"}]},oAqT:function(e,t,n){var o=n("MT78"),a=n("Suk3");n("XZnV"),n("IRQ8"),o.registerCoordinateSystem("bmap",a),o.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(e,t){t.eachComponent("bmap",function(e){var t=e.getBMap(),n=t.getCenter();e.setCenterAndZoom([n.lng,n.lat],t.getZoom())})});t.version="1.0.0"}}]);