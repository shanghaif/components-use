(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cd80"],{"6/D6":function(e,t,a){"use strict";var r=a("NeHh");a.n(r).a},NeHh:function(e,t,a){},O0Tc:function(e,t,a){"use strict";a.r(t);var r=a("OJhq"),s=a("v0iw"),l=a.n(s),n={data:function(){return{zlForm:{hardwareType:"",status:""},activeName:"first",deviceData:[],Isprules:{code:[{required:!0,message:"应用商代号，2个数字、字母组合",trigger:"blur"},{validator:function(e,t,a){/[0-9a-zA-Z]{1,2}/.test(t)?a():a(new Error("应用商代号，2个数字、字母组合"))},trigger:"blur"}],name:[{required:!0,message:"应用商称，1到30个字符",trigger:"blur"},{validator:function(e,t,a){/^[(\u4e00-\u9fa5)|(0-9a-zA-Z)]{1,30}/.test(t)?a():a(new Error("应用商名称，1到30个字符"))},trigger:"blur"}],url:[{required:!0,message:"需要输入正确的url",trigger:"blur"},{validator:function(e,t,a){/^((https|http|ftp|rtsp|mms)?:\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/.test(t)?a():a(new Error("需要输入正确的url"))},trigger:"blur"}],para:[{required:!0,message:"输入para",trigger:"blur"},{validator:function(e,t,a){/[0-9a-zA-Z]/.test(t)?a():a(new Error("输入para"))},trigger:"blur"}]},sukeserver:{name:"",id:"",url:"",para:""},Ispform:{name:"",code:"",url:"",status:"",statuspara:"",para:""},isIsp:!1,ispPageSize:10,ispstart:0,ispTotal:0,objectId:"",zlData:[],zlPageSize:10,zlTotal:0,zlStart:0,templateRadio:{},servervalue:"",serverdata:[]}},mounted:function(){this.getSukeserver()},methods:{resetserver:function(){this.zlForm={hardwareType:"",status:""}},timestampToTime:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds())},getAllserver:function(){var e=this;Object(r.h)({}).then(function(t){e.serverdata=t.data})},getSukeserver:function(){var e=this;Object(r.h)(this.sukeserver,this.ispstart,this.ispPageSize).then(function(t){t&&(e.ispData=t.data,e.ispTotal=t.count)}),Object(r.g)({},this.sukeStart,this.sukePageSize).then(function(t){t&&(e.deviceData=t.data)}),this.getServerlist(),this.getAllserver()},IspSizeChange:function(e){this.ispPageSize=e,this.getSukeserver()},IspCurrentChange:function(e){this.ispstart=(e-1)*this.ispPageSize,this.getSukeserver()},queryyys:function(){var e=this;Object(r.h)(this.sukeserver,this.ispstart,this.ispPageSize).then(function(t){t&&(e.ispData=t.data,e.ispTotal=t.count,e.$forceUpdate())})},getTemplateRow:function(e,t){this.servervalue=t},TsSuke:function(e){console.log(e)},resetyyys:function(){this.sukeserver={name:"",id:"",url:"",para:""}},addSkyys:function(e){var t=this;this.$refs[e].validate(function(a){a&&(""!=t.objectId?Object(r.d)(t.objectId,t.Ispform.name,t.Ispform.code,t.Ispform.url,t.Ispform.para,t.Ispform.status,t.Ispform.statuspara).then(function(a){a.error||(t.$message({message:"服务商"+t.Ispform.name+"修改成功",type:"success"}),t.isIsp=!1,t.objectId="",t.getSukeserver(),t.$refs[e].resetFields(),t.Ispform.status="",t.Ispform.statuspara="")}).catch(function(e){console.log(e)}):Object(r.c)(t.Ispform.name,t.Ispform.code,t.Ispform.url,t.Ispform.para,t.Ispform.status,t.Ispform.statuspara).then(function(a){a&&(t.$message({message:"服务商添加成功",type:"success"}),t.isIsp=!1,t.getSukeserver(),t.$refs[e].resetFields(),t.Ispform.status="",t.Ispform.statuspara="")}).catch(function(e){console.log(e)}))})},editorSuke:function(e){console.log(this.servervalue),""==this.servervalue?this.$message({message:"请选择服务商",type:"warning"}):(this.objectId=this.servervalue.objectId,this.isIsp=!0,this.Ispform.name=this.servervalue.name,this.Ispform.code=this.servervalue.id,this.Ispform.url=this.servervalue.url,this.Ispform.para=this.servervalue.para,this.Ispform.status=this.servervalue.status_url,this.Ispform.statuspara=this.servervalue.status_para)},getServerlist:function(){var e=this,t=l.a.Object.extend("SukeLog"),a=new l.a.Query(t);""!=this.zlForm.hardwareType&&a.equalTo("hardwareType",this.zlForm.hardwareType),""!=this.zlForm.status&&a.equalTo("status",this.zlForm.status),a.limit(this.zlPageSize),a.skip(this.zlStart),a.count().then(function(t){e.zlTotal=t,a.find().then(function(t){e.zlData=t})})},zlSizeChange:function(e){this.zlPageSize=e,this.getServerlist()},zlCurrentChange:function(e){this.zlStart=(e-1)*this.zlPageSize,this.getServerlist()}}},i=(a("VxV1"),a("6/D6"),a("KHd+")),o=Object(i.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sukeserver"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"推送记录",name:"first"}},[a("div",{staticClass:"firstheader"},[a("el-form",{ref:"zlForm",attrs:{model:e.zlForm,inline:!0}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.zlForm.hardwareType,callback:function(t){e.$set(e.zlForm,"hardwareType",t)},expression:"zlForm.hardwareType"}},e._l(e.deviceData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"指令状态"}},[a("el-select",{attrs:{placeholder:"请选择指令状态"},model:{value:e.zlForm.status,callback:function(t){e.$set(e.zlForm,"status",t)},expression:"zlForm.status"}},[a("el-option",{attrs:{label:"发送成功",value:"SEND_SUCCESS"}}),e._v(" "),a("el-option",{attrs:{label:"发送失败设备不在线",value:"SEND_FAIL_OFFLINE"}}),e._v(" "),a("el-option",{attrs:{label:"发送失败授权码不正确",value:"SEND_FAIL_DISALLOW"}}),e._v(" "),a("el-option",{attrs:{label:"等待发送",value:"WAIT_SEND"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getServerlist}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.resetserver}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"firsttable",staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.zlData}},[a("el-table-column",{attrs:{label:"设备",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.hardwareType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"应用商",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.instruct_id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"指令",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.paras))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.attributes.ts)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["SEND_SUCCESS"==t.row.attributes.status?a("span",{staticStyle:{color:"green"}},[e._v("发送成功")]):"WAIT_SEND"==t.row.attributes.status?a("span",{staticStyle:{color:"#e6a23c"}},[e._v("等待发送")]):a("span",{staticStyle:{color:"red"}},[e._v("发送失败")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"fenye"},[a("el-pagination",{attrs:{background:"","pager-count":10,"page-sizes":[10,20,30,50],"page-size":e.zlPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.zlTotal},on:{"size-change":e.zlSizeChange,"current-change":e.zlCurrentChange}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"服务商管理",name:"second"}},[a("div",[a("div",{staticClass:"sukeserverheader"},[a("el-form",{ref:"sukeserver",attrs:{model:e.sukeserver,inline:!0}},[a("el-form-item",{attrs:{label:"应用商名称"}},[a("el-select",{attrs:{placeholder:"请选择应用商名称"},model:{value:e.sukeserver.name,callback:function(t){e.$set(e.sukeserver,"name",t)},expression:"sukeserver.name"}},e._l(e.serverdata,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商代号"}},[a("el-select",{attrs:{placeholder:"请选择应用商代号"},model:{value:e.sukeserver.id,callback:function(t){e.$set(e.sukeserver,"id",t)},expression:"sukeserver.id"}},e._l(e.serverdata,function(e,t){return a("el-option",{key:t,attrs:{label:e.id,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商接口地址"}},[a("el-select",{attrs:{placeholder:"请选择应用商接口地址"},model:{value:e.sukeserver.url,callback:function(t){e.$set(e.sukeserver,"url",t)},expression:"sukeserver.url"}},e._l(e.serverdata,function(e,t){return a("el-option",{key:t,attrs:{label:e.url,value:e.url}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商接口para"}},[a("el-input",{attrs:{placeholder:"应用商接口para",type:"number"},model:{value:e.sukeserver.para,callback:function(t){e.$set(e.sukeserver,"para",t)},expression:"sukeserver.para"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.queryyys}},[e._v("查 询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.resetyyys}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.isIsp=!0}}},[e._v("添加应用商")]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-bottom":"10px","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.editorSuke}},[e._v("编辑")])],1),e._v(" "),a("div",{staticClass:"sukesecond"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.ispData,height:"300"}},[a("el-table-column",{attrs:{label:"#",width:"65",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.objectId},nativeOn:{change:function(a){e.getTemplateRow(t.$index,t.row)}},model:{value:e.templateRadio,callback:function(t){e.templateRadio=t},expression:"templateRadio"}},[e._v(e._s("   "))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"应用商名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"应用商代号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"应用商接口地址",align:"center",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{prop:"para",label:"应用商接口PARA",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.TsSuke(t.row)}}},[e._v("推送")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"fenye"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,50],"page-size":e.ispPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.ispTotal},on:{"size-change":e.IspSizeChange,"current-change":e.IspCurrentChange}})],1),e._v(" "),a("div",{staticClass:"geduan",staticStyle:{width:"100%",height:"4px",background:"#cccccc","margin-top":"5px"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isIsp,expression:"isIsp"}],staticClass:"addisp"},[a("el-form",{ref:"Ispform",attrs:{model:e.Ispform,"label-width":"200px",rules:e.Isprules}},[a("el-form-item",{attrs:{label:"应用商名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"应用商名称，1-30个字符"},model:{value:e.Ispform.name,callback:function(t){e.$set(e.Ispform,"name",t)},expression:"Ispform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商代号",prop:"code"}},[a("el-input",{attrs:{placeholder:"应用商代号，2个数字、字母组合"},model:{value:e.Ispform.code,callback:function(t){e.$set(e.Ispform,"code",t)},expression:"Ispform.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商接口地址",prop:"url"}},[a("el-input",{attrs:{placeholder:"应用商接口地址，需包含http://"},model:{value:e.Ispform.url,callback:function(t){e.$set(e.Ispform,"url",t)},expression:"Ispform.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商接口para",prop:"para"}},[a("el-input",{attrs:{placeholder:"应用商接口para"},model:{value:e.Ispform.para,callback:function(t){e.$set(e.Ispform,"para",t)},expression:"Ispform.para"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商设备状态接口地址"}},[a("el-input",{attrs:{placeholder:"应用商设备状态接口地址,需包含http://"},model:{value:e.Ispform.status,callback:function(t){e.$set(e.Ispform,"status",t)},expression:"Ispform.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用商设备状态接口para"}},[a("el-input",{attrs:{placeholder:"应用商设备状态接口para"},model:{value:e.Ispform.statuspara,callback:function(t){e.$set(e.Ispform,"statuspara",t)},expression:"Ispform.statuspara"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSkyys("Ispform")}}},[e._v("提 交")])],1)],1)],1)])],1)],1)},[],!1,null,"7d86cf97",null);o.options.__file="sukeserver.vue";t.default=o.exports},OJhq:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return i}),a.d(t,"b",function(){return o}),a.d(t,"f",function(){return u}),a.d(t,"a",function(){return c}),a.d(t,"e",function(){return p}),a.d(t,"i",function(){return m}),a.d(t,"j",function(){return d}),a.d(t,"g",function(){return f}),a.d(t,"h",function(){return v});var r=a("YEIV"),s=a.n(r),l=a("t3Un");function n(e,t,a,r,n,i){var o;return Object(l.a)({url:"/suke/add_yys",method:"post",params:(o={name:e,id:t,url:a,para:r,status_url:n},s()(o,"status_url",n),s()(o,"status_para",i),o)})}function i(e,t,a,r,n,i,o){var u;return Object(l.a)({url:"/suke/edit_yys",method:"put",params:(u={objectId:e,name:t,id:a,url:r,para:n,status_url:i},s()(u,"status_url",i),s()(u,"status_para",o),u)})}function o(e,t,a,r){return Object(l.a)({url:"/suke/add_devtype",method:"post",params:{name:e,number:t,remark:a,enable:r}})}function u(e,t,a,r,s){return Object(l.a)({url:"/suke/edit_devtype",method:"put",params:{objectId:e,name:t,number:a,remark:r,enable:s}})}function c(e){return Object(l.a)({url:"/suke/add_zl",method:"post",params:{hardwareType:e.hardwareType,name:e.name,nameEncrypt:e.nameEncrypt,needReply:e.needReply,remark:e.remark,enable:e.enable}})}function p(e){return Object(l.a)({url:"/suke/edit_zl",method:"put",params:{objectId:e.objectId,hardwareType:e.hardwareType,name:e.name,nameEncrypt:e.nameEncrypt,needReply:e.needReply,remark:e.remark,enable:e.enable}})}function m(e,t,a){return Object(l.a)({url:"/suke/query_zl_info",method:"get",params:{hardwareType:e.hardwareType,name:e.name,needReply:e.needReply,enable:e.enable,skip:t,limit:a}})}function d(e,t,a){return Object(l.a)({url:"/suke/query_suke_dev",method:"get",params:{hardwareType:e.hardwareType,customerId:e.customer,hardware_number:e.hardware_number,status:e.status,ol_status:e.ol_status,auth:e.auth,skip:t,limit:a}})}function f(e,t,a){return Object(l.a)({url:"/suke/query_devtype_info",method:"get",params:{name:e.name,number:e.number,enable:e.enable,skip:t,limit:a}})}function v(e,t,a){return Object(l.a)({url:"/suke/query_yys_info",method:"get",params:{name:e.name,id:e.id,url:e.url,para:e.para,skip:t,limit:a}})}},T9PW:function(e,t,a){},VxV1:function(e,t,a){"use strict";var r=a("T9PW");a.n(r).a}}]);